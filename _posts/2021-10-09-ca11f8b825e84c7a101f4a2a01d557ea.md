---
title:  (ğŸƒSpring) Spring MVC

categories: ë°±ì—”ë“œ 
tags: java  spring  mvc
 
---

  
  
ì„œë¸”ë¦¿ì´ ìŠ¤í”„ë§ì´ ë˜ì–´ê°€ëŠ” ê³¼ì •ì—ì„œ ìŠ¤í”„ë§ì˜ êµ¬ì¡°ê°€ í˜•ì„±ë˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ì•˜ë‹¤.(ë§í¬) ì´ì œ ì„¸ì„¸í•˜ê²Œ êµ¬ì„±ìš”ì†Œë“¤ì„ ì‚´í´ë³´ë„ë¡ í•˜ì.   
  
## DispatcherServlet êµ¬ì¡° ì‚´í´ë³´ê¸°  
org.springframework.web.servlet.DispatcherServlet íŒ¨í‚¤ì§€  
  
ìŠ¤í”„ë§ MVCì˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°”ë¡œ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿(DispatcherServlet)ì´ë‹¤. ê·¸ë¦¬ê³  ì´ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ë°”ë¡œ ìŠ¤í”„ë§ MVCì˜ í•µì‹¬ì´ë‹¤.  
  
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispacherServlet ì„ ì„œë¸”ë¦¿ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ë©´ì„œ ëª¨ë“  ê²½ë¡œ( urlPatterns="/" )ì— ëŒ€í•´ì„œ ë§¤í•‘í•œë‹¤.  
ì°¸ê³ : ë” ìì„¸í•œ ê²½ë¡œê°€ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì— ë“±ë¡í•œ ì„œë¸”ë¦¿ë„ í•¨ê»˜ ë™ì‘í•œë‹¤.  
  
  
### ìš”ì²­ íë¦„  
ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ë©´ HttpServlet ì´ ì œê³µí•˜ëŠ” serivce() ê°€ í˜¸ì¶œëœë‹¤.  
ìŠ¤í”„ë§ MVCëŠ” DispatcherServlet ì˜ ë¶€ëª¨ì¸ FrameworkServlet ì—ì„œ service() ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•´ë‘ì—ˆë‹¤.  
FrameworkServlet.service() ë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ì„œ DispacherServlet.doDispatch() ê°€ í˜¸ì¶œëœë‹¤.  
ì§€ê¸ˆë¶€í„° DispacherServlet ì˜ í•µì‹¬ì¸ doDispatch() ì½”ë“œë¥¼ ë¶„ì„í•´ë³´ì. ìµœëŒ€í•œ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì˜ˆì™¸ì²˜ë¦¬, ì¸í„°ì…‰í„° ê¸°ëŠ¥ì€ ì œì™¸í–ˆë‹¤.  
  
```  
 protected void doDispatch(HttpServletRequest request, HttpServletResponse  
  response) throws Exception {  
    HttpServletRequest processedRequest = request;  
    HandlerExecutionChain mappedHandler = null;  
    ModelAndView mv = null;  
// 1. í•¸ë“¤ëŸ¬ ì¡°íšŒ  
mappedHandler = getHandler(processedRequest); if (mappedHandler == null) {  
 noHandlerFound(processedRequest, response);  
return; }  
//2.í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ-í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„°  
HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());  
// 3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ -> 4. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ í•¸ë“¤ëŸ¬ ì‹¤í–‰ -> 5. ModelAndView ë°˜í™˜ mv = ha.handle(processedRequest, response, mappedHandler.getHandler());  
  processDispatchResult(processedRequest, response, mappedHandler, mv,  
dispatchException);  
}  
private void processDispatchResult(HttpServletRequest request,  
HttpServletResponse response, HandlerExecutionChain mappedHandler, ModelAndView  
mv, Exception exception) throws Exception {  
// ë·° ë Œë”ë§ í˜¸ì¶œ  
render(mv, request, response);  
}  
protected void render(ModelAndView mv, HttpServletRequest request,  
HttpServletResponse response) throws Exception {  
  View view;  
String viewName = mv.getViewName(); //6. ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ì„œ ë·° ì°¾ê¸°,7.View ë°˜í™˜  
  view = resolveViewName(viewName, mv.getModelInternal(), locale, request);  
// 8. ë·° ë Œë”ë§  
  view.render(mv.getModelInternal(), request, response);  
}  
```  
  
ì´ì „ v5 êµ¬í˜„ê³¼ ê±°ì˜ ë™ì¼í•˜ë‹¤.  
  
ë™ì‘ ìˆœì„œ  
1. í•¸ë“¤ëŸ¬ ì¡°íšŒ: í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ìš”ì²­ URLì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ë¥¼ ì¡°íšŒí•œë‹¤.  
2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ: í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì¡°íšŒí•œë‹¤.  
3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì‹¤í–‰í•œë‹¤.  
4. í•¸ë“¤ëŸ¬ ì‹¤í–‰: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•œë‹¤.  
5. ModelAndView ë°˜í™˜: í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” í•¸ë“¤ëŸ¬ê°€ ë°˜í™˜í•˜ëŠ” ì •ë³´ë¥¼ ModelAndViewë¡œ ë³€í™˜í•´ì„œ  
ë°˜í™˜í•œë‹¤.  
6. viewResolver í˜¸ì¶œ: ë·° ë¦¬ì¡¸ë²„ë¥¼ ì°¾ê³  ì‹¤í–‰í•œë‹¤.  
JSPì˜ ê²½ìš°: InternalResourceViewResolver ê°€ ìë™ ë“±ë¡ë˜ê³ , ì‚¬ìš©ëœë‹¤.  
7. Viewë°˜í™˜:ë·°ë¦¬ì¡¸ë²„ëŠ”ë·°ì˜ë…¼ë¦¬ì´ë¦„ì„ë¬¼ë¦¬ì´ë¦„ìœ¼ë¡œë°”ê¾¸ê³ ,ë Œë”ë§ì—­í• ì„ë‹´ë‹¹í•˜ëŠ”ë·°ê°ì²´ë¥¼  
ë°˜í™˜í•œë‹¤.  
JSPì˜ ê²½ìš° InternalResourceView(JstlView) ë¥¼ ë°˜í™˜í•˜ëŠ”ë°, ë‚´ë¶€ì— forward() ë¡œì§ì´ ìˆë‹¤.  
8. ë·°ë Œë”ë§:ë·°ë¥¼í†µí•´ì„œë·°ë¥¼ë Œë”ë§í•œë‹¤.  
  
  
  
  
### Handler  
#### old controller  
ì˜›ë‚  ìŠ¤í”„ë§ ì´ˆê¸°ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ëª¨ë¸  
  
```  
@Component("/springmvc/old-controller")  
    public class OldController implements Controller {  
@Override  
        public ModelAndView handleRequest(HttpServletRequest request,  
    HttpServletResponse response) throws Exception {  
            System.out.println("OldController.handleRequest");  
            return null;  
        }  
}  
```  
  
Component : ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” /springmvc/old-controller ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ì—ˆë‹¤. ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ URLì„ ë§¤í•‘í•  ê²ƒì´ë‹¤.  
  
  
  
HandlerMapping(í•¸ë“¤ëŸ¬ ë§¤í•‘)  
í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.  
ì˜ˆ) ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì´ í•„ìš”í•˜ë‹¤.  
  
0 = RequestMappingHandlerMapping : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš©  
1 = BeanNameUrlHandlerMapping : ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.  
  
  
HandlerAdapter(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)  
í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”í•˜ë‹¤.  
ì˜ˆ) Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•œë‹¤.  
  
0 = RequestMappingHandlerAdapter : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš©  
1 = HttpRequestHandlerAdapter : HttpRequestHandler ì²˜ë¦¬  
2 = SimpleControllerHandlerAdapter : Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜X, ê³¼ê±°ì— ì‚¬ìš©) ì²˜ë¦¬  
  
  
  
  
  
  
HttpRequestHandler  
í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼, ì–´ëŒ‘í„°ë¥¼ ë” ì˜ ì´í•´í•˜ê¸° ìœ„í•´ Controller ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í•¸ë“¤ëŸ¬ë¥¼ ì•Œì•„ë³´ì. HttpRequestHandler í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ëŠ” ì„œë¸”ë¦¿ê³¼ ê°€ì¥ ìœ ì‚¬í•œ í˜•íƒœì˜ í•¸ë“¤ëŸ¬ì´  
  
@RequestMapping  
ì¡°ê¸ˆ ë’¤ì—ì„œ ì„¤ëª…í•˜ê² ì§€ë§Œ, ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” RequestMappingHandlerMapping ,  
RequestMappingHandlerAdapter ì´ë‹¤.  
@RequestMapping ì˜ ì•ê¸€ìë¥¼ ë”°ì„œ ë§Œë“  ì´ë¦„ì¸ë°, ì´ê²ƒì´ ë°”ë¡œ ì§€ê¸ˆ ìŠ¤í”„ë§ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì›í•˜ëŠ” ë§¤í•‘ê³¼ ì–´ëŒ‘í„°ì´ë‹¤. ì‹¤ë¬´ì—ì„œëŠ” 99.9% ì´ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤.  
  
  
  
### View Resolver  
  
template engineì— ì¢…ì†ì ì¸ ë…¼ë¦¬ì ì¸ ë·°ì˜ ì´ë¦„ì„ ë¬¸ìì—´ë¡œ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ë´¤ì„ ê²ƒì´ë‹¤. ë”°ë¼ì„œ í…œí”Œë¦¿ ì—”ì§„ì— ë”°ë¼ ì ‘ë‘ ì ‘ë¯¸ì‚¬ë¥¼ ë¶™ì—¬ì•¼ ì œëŒ€ë¡œ ë·°ë¥¼ì°¾ì•„ê°ˆ ìˆ˜ ìˆë‹¤.  
  
application.properties ì— ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì  
  spring.mvc.view.prefix=/WEB-INF/views/  
  spring.mvc.view.suffix=.jsp  
  
2. ViewResolver í˜¸ì¶œ  
  
  new-form ì´ë¼ëŠ” ë·° ì´ë¦„ìœ¼ë¡œ viewResolverë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.  
BeanNameViewResolver ëŠ” new-form ì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ë·°ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ë° ì—†ë‹¤. InternalResourceViewResolver ê°€ í˜¸ì¶œëœë‹¤.  
InternalResourceView ëŠ” JSPì²˜ëŸ¼ í¬ì›Œë“œ forward() ë¥¼ í˜¸ì¶œí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.  
  
ì°¸ê³   
> ë‹¤ë¥¸ ë·°ëŠ” ì‹¤ì œ ë·°ë¥¼ ë Œë”ë§í•˜ì§€ë§Œ, JSPì˜ ê²½ìš° forward() í†µí•´ì„œ í•´ë‹¹ JSPë¡œ ì´ë™(ì‹¤í–‰)í•´ì•¼ ë Œë”ë§ì´    
ëœë‹¤. JSPë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë·° í…œí”Œë¦¿ë“¤ì€ forward() ê³¼ì • ì—†ì´ ë°”ë¡œ ë Œë”ë§ ëœë‹¤.  
> ì°¸ê³     
> Thymeleaf ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´ ThymeleafViewResolver ë¥¼ ë“±ë¡í•´ì•¼ í•œë‹¤. ìµœê·¼ì—ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ    
ì¶”ê°€í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì´ëŸ° ì‘ì—…ë„ ëª¨ë‘ ìë™í™”í•´ì¤€ë‹¤.  
  
ë¬´ë£Œ ê°•ì˜ ë¶€ë¶„ì„ ë”°ë¼ì„œ í•œë²ˆ ë§Œë“¤ì–´ë³¼ê¹Œ? ì— ë¸Œì´ì”¨ë„ í•œë²ˆì€ í•´ë´ì•¼ì§€  
  
  
ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” ë·° ë¦¬ì¡¸ë²„  
(ì‹¤ì œë¡œëŠ” ë” ë§ì§€ë§Œ, ì¤‘ìš”í•œ ë¶€ë¶„ ìœ„ì£¼ë¡œ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì¼ë¶€ ìƒëµ)  
1 = BeanNameViewResolver : ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë·°ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤. (ì˜ˆ: ì—‘ì…€ íŒŒì¼ ìƒì„± ê¸°ëŠ¥ì— ì‚¬ìš©)  
2 = InternalResourceViewResolver : JSPë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë·°ë¥¼ ë°˜í™˜í•œë‹¤.  
  
  
ìŠ¤í”„ë§ MVC - ì‹œì‘í•˜ê¸°  
=> ìš”ê±°ëŠ” ì •ë¦¬ë¥¼ ì•ˆí•˜ê±°ë‚˜ ë¬´ë£Œê°•ì˜ ì‹¤ìŠµì •ë„ë§Œ í•´ë³´ê±°ë‚˜ ë‹¤ë¥¸ í¬ìŠ¤íŠ¸ë¡œ ì •ë¦¬í•´ë³´ì  
  
P120ë¶€í„°ì´ë‹¤.  
  
  
  
ë¦¬í€˜ìŠ¤íŠ¸ í—¤ë”íƒ€ì…ì— ë”°ë¼ì„œë„ ë¼ìš°íŒ…ì´ ê°€ëŠ¥í•˜ë‹¤.  
```  
@PostMapping(value = "/mapping-consume", consumes = "application/json") public String mappingConsumes() { log.info("mappingConsumes"); return "ok"; }  
  
@PostMapping(value = "/mapping-produce", produces = "text/html")  
public String mappingProduces() { log.info("mappingProduces"); return "ok"; }  
```  
  
ì£¼ì˜! - ê¸°ë³¸í˜•(primitive)ì— null ì…ë ¥ /request-param ìš”ì²­ @RequestParam(required = false) int age null ì„ int ì— ì…ë ¥í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥(500 ì˜ˆì™¸ ë°œìƒ) ë”°ë¼ì„œ null ì„ ë°›ì„ ìˆ˜ ìˆëŠ” Integer ë¡œ ë³€ê²½í•˜ê±°ë‚˜, ë˜ëŠ” ë‹¤ìŒì— ë‚˜ì˜¤ëŠ” defaultValue ì‚¬ìš©  
  
  
  
@PostMapping("/request-body-string-v2") public void requestBodyStringV2(InputStream inputStream, Writer responseWriter) throws IOException { String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8); log.info("messageBody={}", messageBody); responseWriter.write("ok"); }  
  
  
  
  
@PostMapping("/request-body-string-v3") public HttpEntity requestBodyStringV3(HttpEntity httpEntity) { String messageBody = httpEntity.getBody(); log.info("messageBody={}", messageBody); return new HttpEntity<>("ok"); } ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤. HttpEntity: HTTP header, body ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ ì§ì ‘ ì¡°íšŒ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ê³¼ ê´€ê³„ ì—†ìŒ @RequestParam X, @ModelAttribute X HttpEntityëŠ” ì‘ë‹µì—ë„ ì‚¬ìš© ê°€ëŠ¥ ë©”ì‹œì§€ ë°”ë”” ì •ë³´ ì§ì ‘ ë°˜í™˜ í—¤ë” ì •ë³´ í¬í•¨ ê°€ëŠ¥ view ì¡°íšŒX  
  
  
  
> ì°¸ê³  > ìŠ¤í”„ë§MVC ë‚´ë¶€ì—ì„œ HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì½ì–´ì„œ ë¬¸ìë‚˜ ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ì „ë‹¬í•´ì£¼ëŠ”ë°, ì´ë•Œ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°( HttpMessageConverter )ë¼ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤. ì´ê²ƒì€ ì¡°ê¸ˆ ë’¤ì— HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ì—ì„œ ìì„¸íˆ ì„¤ëª…í•œë‹¤.    
  
  
  
HTTP ì‘ë‹µ - ì •ì  ë¦¬ì†ŒìŠ¤, ë·° í…œí”Œë¦¿ ì‘ë‹µ ë°ì´í„°ëŠ” ì´ë¯¸ ì•ì—ì„œ ì¼ë¶€ ë‹¤ë£¬ ë‚´ìš©ë“¤ì´ì§€ë§Œ, ì‘ë‹µ ë¶€ë¶„ì— ì´ˆì ì„ ë§ì¶”ì–´ì„œ ì •ë¦¬í•´ë³´ì. ìŠ¤í”„ë§(ì„œë²„)ì—ì„œ ì‘ë‹µ ë°ì´í„°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ì´ë‹¤. ì •ì  ë¦¬ì†ŒìŠ¤ ì˜ˆ) ì›¹ ë¸Œë¼ìš°ì €ì— ì •ì ì¸ HTML, css, jsì„ ì œê³µí•  ë•ŒëŠ”, ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤. ë·° í…œí”Œë¦¿ ì‚¬ìš© ì˜ˆ) ì›¹ ë¸Œë¼ìš°ì €ì— ë™ì ì¸ HTMLì„ ì œê³µí•  ë•ŒëŠ” ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•œë‹¤. HTTP ë©”ì‹œì§€ ì‚¬ìš© HTTP APIë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ì—ëŠ” HTMLì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì•¼ í•˜ë¯€ë¡œ, HTTP ë©”ì‹œì§€ ë°”ë””ì— JSON ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì‹¤ì–´ ë³´ë‚¸ë‹¤. ì •ì  ë¦¬ì†ŒìŠ¤ ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ìˆëŠ” ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤. /static , /public , /resources , /META-INF/resources src/main/resources ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ê³³ì´ê³ , ë˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ ì‹œì‘ ê²½ë¡œì´ë‹¤. ë”°ë¼ì„œ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë„£ì–´ë‘ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ src/main/resources/static ë‹¤ìŒ ê²½ë¡œì— íŒŒì¼ì´ ë“¤ì–´ìˆìœ¼ë©´ src/main/resources/static/basic/hello-form.html ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•˜ë©´ ëœë‹¤. http://localhost:8080/basic/hello-form.html ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” í•´ë‹¹ íŒŒì¼ì„ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤í•˜ëŠ” ê²ƒì´ë‹¤.  
  
  
  
  
ë·° í…œí”Œë¦¿ ë·° í…œí”Œë¦¿ì„ ê±°ì³ì„œ HTMLì´ ìƒì„±ë˜ê³ , ë·°ê°€ ì‘ë‹µì„ ë§Œë“¤ì–´ì„œ ì „ë‹¬í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ HTMLì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, ë‹¤ë¥¸ ê²ƒë“¤ë„ ê°€ëŠ¥í•˜ë‹¤. ë·° í…œí”Œë¦¿ì´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì´ë¼ë©´ ë­ë“ ì§€ ê°€ëŠ¥í•˜ë‹¤. ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ ë·° í…œí”Œë¦¿ ê²½ë¡œë¥¼ ì œê³µí•œë‹¤. ë·° í…œí”Œë¦¿ ê²½ë¡œ src/main/resources/templates ë·° í…œí”Œë¦¿ ìƒì„± src/main/resources/templates/response/hello.html  
  
  
  
  
  
@RestController @Controller ëŒ€ì‹ ì— @RestController ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì— ëª¨ë‘ @ResponseBody ê°€ ì ìš©ë˜ëŠ” íš¨ê³¼ê°€ ìˆë‹¤. ë”°ë¼ì„œ ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ë°ì´í„°ë¥¼ ì…ë ¥í•œë‹¤. ì´ë¦„ ê·¸ëŒ€ë¡œ Rest API(HTTP API)ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤. ì°¸ê³ ë¡œ @ResponseBody ëŠ” í´ë˜ìŠ¤ ë ˆë²¨ì— ë‘ë©´ ì „ì²´ì— ë©”ì„œë“œì— ì ìš©ë˜ëŠ”ë°, @RestController ì—ë…¸í…Œì´ì…˜ ì•ˆì— @ResponseBody ê°€ ì ìš©ë˜ì–´ ìˆë‹¤  
  
  
  
  
ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒì˜ ê²½ìš°ì— HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì ìš©í•œë‹¤. HTTP ìš”ì²­: @RequestBody , HttpEntity(RequestEntity) , HTTP ì‘ë‹µ: @ResponseBody , HttpEntity(ResponseEntity) , HTTP ë©”ì‹œì§€ ì»¨ë²„í„° ì¸í„°í˜ì´ìŠ¤ org.springframework.http.converter.HttpMessageConverter package org.springframework.http.converter; public interface HttpMessageConverter { boolean canRead(Class clazz, @Nullable MediaType mediaType); boolean canWrite(Class clazz, @Nullable MediaType mediaType); List getSupportedMediaTypes(); T read(Class clazz, HttpInputMessage inputMessage) throws IOException, HttpMessageNotReadableException; void write(T t, @Nullable MediaType contentType, HttpOutputMessage outputMessage) throws IOException, HttpMessageNotWritableException; } HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” HTTP ìš”ì²­, HTTP ì‘ë‹µ ë‘˜ ë‹¤ ì‚¬ìš©ëœë‹¤. canRead() , canWrite() : ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ í•´ë‹¹ í´ë˜ìŠ¤, ë¯¸ë””ì–´íƒ€ì…ì„ ì§€ì›í•˜ëŠ”ì§€ ì²´í¬ read() , write() : ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ì„œ ë©”ì‹œì§€ë¥¼ ì½ê³  ì“°ëŠ” ê¸°ëŠ¥  
  
  
  
ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë³¸ ë©”ì‹œì§€ ì»¨ë²„í„° (ì¼ë¶€ ìƒëµ) 0 = ByteArrayHttpMessageConverter 1 = StringHttpMessageConverter 2 = MappingJackson2HttpMessageConverter  
  
  
  
  
**178~181 ë‚´ìš© ì¤‘ìš”í• ë“¯ ì •ë¦¬í•˜ì**  
  
  
  
ëª‡ê°€ì§€ ì£¼ìš”í•œ ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ ì•Œì•„ë³´ì. ByteArrayHttpMessageConverter : byte[] ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤. í´ë˜ìŠ¤ íƒ€ì…: byte[] , ë¯¸ë””ì–´íƒ€ì…: */* , ìš”ì²­ ì˜ˆ) @RequestBody byte[] data ì‘ë‹µ ì˜ˆ) @ResponseBody return byte[] ì“°ê¸° ë¯¸ë””ì–´íƒ€ì… application/octet-stream StringHttpMessageConverter : String ë¬¸ìë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤. í´ë˜ìŠ¤ íƒ€ì…: String , ë¯¸ë””ì–´íƒ€ì…: */* ìš”ì²­ ì˜ˆ) @RequestBody String data ì‘ë‹µ ì˜ˆ) @ResponseBody return "ok" ì“°ê¸° ë¯¸ë””ì–´íƒ€ì… text/plain MappingJackson2HttpMessageConverter : application/json í´ë˜ìŠ¤ íƒ€ì…: ê°ì²´ ë˜ëŠ” HashMap , ë¯¸ë””ì–´íƒ€ì… application/json ê´€ë ¨ ìš”ì²­ ì˜ˆ) @RequestBody HelloData data ì‘ë‹µ ì˜ˆ) @ResponseBody return helloData ì“°ê¸° ë¯¸ë””ì–´íƒ€ì… application/json ê´€ë ¨  
  
  
  
  
PRG Post/Redirect/Get  
ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œ ê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•œë‹¤. ìƒˆë¡œ ê³ ì¹¨ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ìƒí’ˆ ì €ì¥ í›„ì— ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í˜¸ì¶œí•´ì£¼ë©´ ëœë‹¤. ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ì˜ ì˜í–¥ìœ¼ë¡œ ìƒí’ˆ ì €ì¥ í›„ì— ì‹¤ì œ ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™í•œë‹¤. ë”°ë¼ì„œ ë§ˆì§€ë§‰ì— í˜¸ì¶œí•œ ë‚´ìš©ì´ ìƒí’ˆ ìƒì„¸ í™”ë©´ì¸ GET /items/{id} ê°€ ë˜ëŠ” ê²ƒì´ë‹¤. ì´í›„ ìƒˆë¡œê³ ì¹¨ì„ í•´ë„ ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ê²Œ ë˜ë¯€ë¡œ ìƒˆë¡œ ê³ ì¹¨ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  
