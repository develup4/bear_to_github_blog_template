---
title:  ğŸƒSpring ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”

subtitle:  í•µì‹¬ì›ë¦¬ ì‹œë¦¬ì¦ˆ
categories: ìŠ¤í”„ë§ë¶€íŠ¸ 
tags: backend  java  component-scan
 
---

  
ì•ì„  ê¸€ ë§ˆì§€ë§‰ì— ë§í•œ ê²ƒ ì²˜ëŸ¼ ì´ë²ˆì—” ì¡°ê¸ˆ ë” ì‹¤ì „ì ì´ê³  ìŠ¤í”„ë§ì„ í¸í•˜ê²Œ ì“¸ ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³¼ ê²ƒì´ë‹¤.  
  
- ìŠ¤í”„ë§ì€ ì„¤ì • ì •ë³´ê°€ ì—†ì–´ë„ ìë™ìœ¼ë¡œ Beanì„ ë“±ë¡í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”(Component Scan)ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.  
- ë˜í•œ ì˜ì¡´ê´€ê³„ë„ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” @Autowired ë¼ëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤.  
  
ì—´ì‹¬íˆ AppConfigë¥¼ ë§Œë“¤ê³  @Beanì„ ë¶™ì—¬ì„œ ìƒì„±í•œ ë’¤ì— getBean()ì„ í˜¸ì¶œí•´ì„œ ì–»ì–´ì˜¤ëŠ” ìš°ì•„í•˜ì§€ ëª»í•œ(?) ë°©ì‹ì„ ë²—ì–´ë‚˜, ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ë¬´ì–¸ê°€ë¥¼ í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ì´ì œë¶€í„° êµ¬ì²´ì ìœ¼ë¡œ ì•Œì•„ë³´ì.  
  
  
```java  
@Configuration  
@ComponentScan()  
public class AutoAppConfig {  
      
}  
```  
  
  
í´ë˜ìŠ¤ ì•ˆì˜ ë‚´ìš©ì´ ëª¨ë‘ ì‚¬ë¼ì ¸ë²„ë ¸ë‹¤. ëŒ€ì‹  ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì´ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ í•˜ë‚˜ ì¶”ê°€ë˜ì—ˆì„ ë¿ì´ë‹¤. ì´ì œ ì´ ë…€ì„ì€ @Componentë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ëª½ë•… ì°¾ì•„ì„œ(ë‚˜ì¤‘ì— ë‚˜ë¦„ ê·œì¹™ì´ ìˆê¸´í•˜ì§€ë§Œ), Beanìœ¼ë¡œ ë“±ë¡ì‹œí‚¨ë‹¤. ì•„ë˜ì™€ ê°™ì´.  
  
  
```java  
@Component  
public class MemoryMemberRepository implements MemberRepository {}  
  
@Component("RatePolicyBean")  
public class RateDiscountPolicy implements DiscountPolicy {}  
```  
  
  
ì´ì „ ì˜ˆì œë“¤ì—ì„œ ìµìˆ™í•œ ì´ ë…€ì„ë“¤ì´ ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ì— Beanìœ¼ë¡œ ë“±ë¡ì´ ë˜ì—ˆë‹¤. ë‘ë²ˆì§¸ ì• ë…¸í…Œì´ì…˜ì²˜ëŸ¼ ì´ë¦„ì„ ì§€ì •í•˜ë©´ Beanì˜ ì´ë¦„ë„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ì´ë²ˆì—” ì´ë ‡ê²Œ ë“±ë¡í•œ Beanì„ ì£¼ì…ë°›ëŠ” ë°©ì‹ë„ ì‚´í´ë³´ì.  
  
  
```java  
@Component  
public class MemberServiceImpl implements MemberService {  
	private final MemberRepository memberRepository;  
  
  @Autowired  
  public MemberServiceImpl(MemberRepository memberRepository) {  
    this.memberRepository = memberRepository;  
  }  
}  
```  
  
ì´ë ‡ê²Œ ì‘ì„±ì„ í•˜ë©´ MemberServiceImpl ì—­ì‹œ Beanì´ ë ë¿ë”ëŸ¬ ìƒì„±ì ìœ„ì— @Autowired ì• ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì£¼ë©´ ìë™ìœ¼ë¡œ ê°ì²´ê°€ ì£¼ì…ì´ ëœë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ í…Œì´ë¸”ì„ ë’¤ì ¸ì„œ ë§ëŠ” íƒ€ì…ì˜ Bean ê°ì²´ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒì´ë‹¤.  
  
ì´ì „ ë°©ì‹ë“¤ì— ë¹„í•´ ì•„ì£¼ì•„ì£¼ í¸ë¦¬í•˜ë‹¤. ìƒì„±ì ì™¸ì—ë„ ì—¬ëŸ¬ ë°©ë²•ì´ ìˆëŠ”ë° ì¶”í›„ì— ì•Œì•„ë³¼ ê²ƒì´ë©° ìƒì„±ì ì£¼ì…ì´ ê°€ì¥ ê¶Œì¥ë˜ëŠ” ë°©ì‹ì´ë‹¤.  
  
88 í˜ì´ì§€ ê·¸ë¦¼ ì²¨ë¶€  
(ê·¸ë¦¬ê³  ë­”ê°€ ê°•ì¡°ë‚˜ ë°‘ì¤„ ì´ëŸ°ê±° ì˜ ì•ˆì“°ê³  ìˆëŠ”ë“¯. ë‹¤ì‹œ ê²€í† )  
  
  
```  
@ComponentScan(  
	basePackages = {"hello.core", "hello.service"}  
}  
```  
  
ì•„ê¹Œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ë¼ëŠ” ë§ì„ í–ˆì—ˆëŠ”ë°, êµ¬ì²´ì ìœ¼ë¡œëŠ” ìœ„ì—ì„œ ì§€ì •í•œ ë””ë ‰í† ë¦¬ì˜ í•˜ìœ„ì—ì„œ ëª¨ë“  @Componentë¥¼ ì°¾ë„ë¡ ë˜ì–´ìˆë‹¤. ì²˜ìŒì²˜ëŸ¼ basePackagesë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ **@ComponentScan**ì„ ë¶™ì¸ í´ë˜ìŠ¤ì˜ Packageë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•˜ë©° ë³´í†µ ì´ë ‡ê²Œ ì‚¬ìš©í•œë‹¤ê³  í•œë‹¤. (ê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ì„¤ì •ì •ë³´ í´ë˜ìŠ¤ë¥¼ í”„ë¡œì íŠ¸ì˜ ìµœìƒë‹¨ì— ë‘ì–´ì•¼í•  ê²ƒì´ë‹¤)  
  
  
> ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒ  
  
- `@Component` : ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ì‚¬ìš©  
- `@Controlller` : ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©  
- `@Service` : ìŠ¤í”„ë§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ì‚¬ìš©  
- `@Repository` : ìŠ¤í”„ë§ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì—ì„œ ì‚¬ìš©  
- `@Configuration` : ìŠ¤í”„ë§ ì„¤ì • ì •ë³´ì—ì„œ ì‚¬ìš©  
  
ìœ„ ë‹¤ì„¯ê°€ì§€ ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ ë…€ì„(í´ë˜ìŠ¤)ë“¤ì€ Beanì´ ëœë‹¤ëŠ” ì´ì•¼ê¸°ì´ë‹¤.  
  
```java  
@Component  
public @interface Controller {  
  
}  
```  
  
IntelliJ ë“±ì„ í†µí•´ @Controller ì• ë…¸í…Œì´ì…˜ì„ ë”°ë¼ê°€ë³´ë©´ ì• ë…¸í…Œì´ì…˜ ì •ì˜ ìœ„ì— @Componentê°€ ë¶™ì–´ìˆëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ Beanìœ¼ë¡œ ë“±ë¡ë˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ë§Œ ì´ëŸ° ì• ë…¸í…Œì´ì…˜ì—ëŠ” ìˆœìˆ˜ JAVAì—ì„œëŠ” ìƒì†ê´€ê³„ë¼ëŠ”ê²Œ ì—†ëŠ”ë° ìŠ¤í”„ë§ì— ì˜í•´ì„œ ê°€ëŠ¥í•´ì§„ ê¸°ëŠ¥ì´ë€ ê²ƒì€ ì£¼ì˜í•˜ì. ìˆœìˆ˜ JAVAì—ì„œë„ í‘œì¤€ìœ¼ë¡œ ë°›ì•„ë“¤ì´ë©´ ì¢‹ì€ ê¸°ëŠ¥ì¸ ê²ƒ ê°™ë‹¤.  
  
  
```java  
@ComponentScan(  
  includeFilters = {  
    @Filter(type = FilterType.ANNOTATION, classes = MyIncludeComponent.class)  
    },  
  excludeFilters = {  
    @Filter(type = FilterType.ANNOTATION, classes = MyExcludeComponent.class),  
    @Filter(type = FilterType.ASSIGNABLE_TYPE, classes = BeanA.class)  
  }  
)  
```  
  
  
ìë™ìœ¼ë¡œ Beanì„ ìŠ¤ìº”í•˜ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•˜ê²Œë„ ê²€ìƒ‰ì—ì„œ ì œì™¸ë˜ëŠ” Beanë„ ì •ì˜ë¥¼ í•  ìˆ˜ê°€ ìˆì–´ì•¼ í•œë‹¤. ìœ„ ì½”ë“œë¥¼ ë³´ë©´ ì‚¬ìš©ë²•ì€ ì–´ë µì§€ ì•Šê² ì§€ë§Œ ë§ì´ ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤ê³  í•œë‹¤. íŠ¹íˆë‚˜ IncludeFilterì˜ ê²½ìš°ëŠ” ë”ìš± ë”.  
  
  
> ë§Œì•½ ìë™ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ì¤‘ì— ì´ë¦„ í˜¹ì€ íƒ€ì…ì´ ë™ì¼í•œ Beanì´ ì¡´ì¬í•˜ì—¬ ì¶©ëŒì´ ì¼ì–´ë‚˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ìµœê·¼ì˜ ìˆ˜ì • ê¸°ì¤€ìœ¼ë¡œ ì´ì•¼ê¸°í•˜ìë©´ ìŠ¤í”„ë§ì´ ì¶©ëŒì‹œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œ ê°œë°œìê°€ ì¶©ëŒì„ ì•Œ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤. ì¼ë‹¨ì€ ê±±ì •í•  í•„ìš”ê°€ ì—†ëŠ” ê²ƒì´ë‹¤.  
  
  
ì´ì œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í†µí•´ Beanì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ì‹œì¼°ìœ¼ë‹ˆ, Beanì„ ì‰½ê²Œ ì£¼ì…ë°›ëŠ” ë°©ë²•ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ì.  
  
  
  
### ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…  
ì˜ì¡´ê´€ê³„ ìë™ ì£¼ì…ì˜ ë°©ë²•ì—ëŠ” ì•„ë˜ ë„¤ ê°€ì§€ê°€ ìˆë‹¤.  
  
- ìƒì„±ì ì£¼ì…  
- Setter ì£¼ì…  
- í•„ë“œ ì£¼ì…  
- ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…  
  
ë¨¼ì € ì•ì„œ ì ê¹ ì†Œê°œí–ˆê³  ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì¸ ìƒì„±ì ì£¼ì… ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•œë‹¤.  ìƒì„±ì ì£¼ì…ì˜ ê²½ìš° ì²˜ìŒ Beanì´ ì„¸íŒ…ë˜ë©´ ë¶ˆë³€ì´ë‹¤. ì „ëµ íŒ¨í„´ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì´ì§€ë§Œ ì´ëŸ° ìœ ì¦ˆì¼€ì´ìŠ¤ëŠ” ë§ì´ ì•Šìœ¼ë¯€ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ì´ë‹¤.  
  
```java  
@Autowired  
public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {  
	this.memberRepository = memberRepository;  
  this.discountPolicy = discountPolicy;  
}  
```  
  
  
ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ë‹µê²Œ ìƒì„±ìê°€ í•˜ë‚˜ë§Œ ìˆëŠ” ê²½ìš°ì—ëŠ” @Autowiredë¥¼ ìƒëµí•˜ì—¬ë„ ìƒì„±ì ì£¼ì…ì´ ì´ë£¨ì–´ì§„ë‹¤. ê°œì¸ì ìœ¼ë¡œëŠ” ë¬´ì¡°ê±´ ê°€ëŠ¥í•œ ëª…ì‹œì ì¸ê²Œ ì¢‹ì§€ì•Šë‚˜ í•˜ëŠ” ìƒê°ì— ë¶™ì´ëŠ”ê±¸ ì„ í˜¸í•œë‹¤.  
  
ë‹¤ìŒì€ Setter ì£¼ì…ì´ë‹¤. ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì‚¬ìš©ë¹ˆë„ëŠ” ë†’ì§€ ì•Šë‹¤ê³  í•œë‹¤.  
  
```java  
private MemberRepository memberRepository;  
  
@Autowired  
public void setMemberRepository(MemberRepository memberRepository) {  
	this.memberRepository = memberRepository;  
}  
```  
  
  
> "Question"  
> ì „ëµ íŒ¨í„´ì²˜ëŸ¼ ë™ì ìœ¼ë¡œ ë‹¤ë¥¸ Beanì„ ì£¼ì…í•˜ë©´ ìœ ìš©í•˜ì§€ ì•Šì„ê¹Œ? í•˜ì§€ë§Œ Beanì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í„´ì´ê¸° ë•Œë¬¸ì— Statelessí•˜ë‹¤ëŠ”ê±¸ ìƒê°í•´ë³´ë©´ ì–¼ë§ˆë‚˜ ìœ ìš©í• ê¹Œ ì‹¶ê¸´ í•˜ë‹¤. ë’¤ì—ì„œ ì†Œê°œí•  ì‹±ê¸€í„´ì´ ì•„ë‹Œ í”„ë¡œí† íƒ€ì… Beanê³¼ì˜ ì‘ìš©ì— ëŒ€í•´ì„œëŠ” ì—°êµ¬í•´ë³¼ ê°€ì¹˜ê°€ ìˆì„ ê²ƒ ê°™ë‹¤.  
  
  
ë‹¤ìŒì€ ê°„ê²°í•œì˜ ëíŒì™•ì¸ í•„ë“œ ì£¼ì…ì´ë‹¤. ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ ì‚¬ìš©í•˜ì§€ ë§ì. ë’¤ì— Lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ì„¤ëª…í•  ê²ƒì´ë‹¤. í•´ë‹¹ ê¸°ëŠ¥ì„ í™œìš©í•œë‹¤ë©´ ì¢‹ë‹¤.  
  
```java  
@Component  
public class OrderServiceImpl implements OrderService {  
  
@Autowired  
private MemberRepository memberRepository;	// ë!  
```  
  
í•„ë“œ ì£¼ì…ì€ ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ë„ ì‰½ì§€ ì•Šë‹¤. ê·¸ë¦¬ê³  ë„ˆë¬´ë‚˜ë„ ëª…ì‹œì ì´ì§€ ì•Šìœ¼ë©°, DI í”„ë ˆì„ì›Œí¬ê°€ ì—†ë‹¤ë©´ null reference exceptionì„ ë§ˆì£¼í•˜ê²Œ ë  ê²ƒì´ë‹¤.           Lombokì´ ì—†ìœ¼ë©´ ëª¨ë¥´ê² ëŠ”ë° ìˆìœ¼ë‹ˆ ë‹¨ë…ìœ¼ë¡œëŠ” ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ!  
  
  
ë§ˆì§€ë§‰ìœ¼ë¡œ ì¼ë°˜ì ì¸ ë©”ì†Œë“œì—ì„œë„ ì£¼ì…ì´ ê°€ëŠ¥í•˜ë‹¤. ì‚¬ì‹¤ìƒ ì›í•œë‹¤ë©´ ì–´ë–¤ í˜•íƒœë¡œë“  ë°›ì„ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì´ ì—­ì‹œ ë¹„ì¶”ì²œì´ë‹¤.  
  
```java  
@Autowired  
public void init(MemberRepository memberRepository, DiscountPolicy discountPolicy) {  
	this.memberRepository = memberRepository;  
  this.discountPolicy = discountPolicy;  
}  
```  
  
  
> "@Autowiredì˜ ì˜µì…˜"  
> ì• ì´ˆì— ì´ëŸ° ì˜µì…˜ì´ ì“°ì´ì§€ ì•ŠëŠ”ê²Œ ì¢‹ì„ ìˆ˜ ìˆì§€ë§Œ ë°©ì–´ì ì¸ ì°¨ì›ì—ì„œ ì•Œì•„ë‘ì. Optionalì€ KOTLINì˜ null ì²˜ë¦¬ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆëŠ” JAVA ë¬¸ë²•ì´ì§€ë§Œ ë” ê°„ë‹¨í•œ ë¬¸ë²•ì„ ì›í•œë‹¤! ìë°”ì—ê²Œ!  
  
```java  
//í˜¸ì¶œ ì•ˆë¨  
@Autowired(required = false)  
public void setNoBean1(Member member) {  
	System.out.println("setNoBean1 = " + member);  
}  
//null í˜¸ì¶œ  
@Autowired  
public void setNoBean2(@Nullable Member member) {  
	System.out.println("setNoBean2 = " + member);  
}  
//Optional.empty í˜¸ì¶œ  
@Autowired(required = false)  
public void setNoBean3(Optional<Member> member) {  
	System.out.println("setNoBean3 = " + member);  
}  
```  
  
  
ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•´ì„œ Beanì„ ì£¼ì…ë°›ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì»´íŒŒì¼ëŸ¬ë¥¼ í†µí•´ì„œ í†µì§€ë¥¼ ë°›ëŠ”í¸ì´ ê°€ì¥ ì•ˆì „í•˜ê¸° ë•Œë¬¸ì— ìƒì„±ì ì£¼ì…ì´ ê°€ì¥ ë§ì´ ì“°ì´ëŠ” ê²ƒ ê°™ë‹¤. ì»´íŒŒì¼(ì—)ëŸ¬ ì§±! ê·¸ë¦¬ê³  ë” ì•ˆì „í•œ ì²˜ë¦¬ë¥¼ ìœ„í•˜ì—¬ final í‚¤ì›Œë“œë¥¼ ê°€ë¯¸í•´ë³¼ ìˆ˜ ìˆë‹¤. (ìƒì„±ì ì£¼ì… ë°©ì‹ì€ ë¶ˆë³€ì—ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ)  
  
```java  
private final MemberRepository memberRepository;  
private final DiscountPolicy discountPolicy;  
  
@Autowired  
public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {  
	this.memberRepository = memberRepository;  
}  
```  
  
  
> ì´ëŸ¬í•œ íŠ¹ì„± ë•Œë¬¸ì— ìƒì„±ì ì£¼ì…ì€ ê°€ì¥ JAVA ë³¸ì—°ì˜ ê¸°ëŠ¥ì„ ì˜ ì‚´ë¦°ë‹¤ í•  ìˆ˜ ìˆë‹¤. ìƒì„±ì ì£¼ì…ì´ ê¶Œì¥ë˜ëŠ” ì´ìœ ë¼ê³  í•  ìˆ˜ ìˆë‹¤.  
  
  
ê·¸ë¦¬ê³  ì—¬ê¸°ì„œ ì°°ë–¡ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ê¹Œë„ ì ê¹ ì–¸ê¸‰í–ˆë˜ Lombokì´ë‹¤. ì–´ë–»ê²Œ í¸ë¦¬í•´ì§€ëŠ”ì§€ ì½”ë“œë¡œ ë°”ë¡œ ì‚´í´ë³´ì.  
  
```java  
@Component  
@RequiredArgsConstructor  
public class OrderServiceImpl implements OrderService {  
   private final MemberRepository memberRepository;  
   private final DiscountPolicy discountPolicy;  
}  
```  
  
  
@RequiredArgsConstructorì— ì˜í•´ ìƒì„±ìê°€ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤. ì• ë…¸í…Œì´ì…˜ì— ì˜í•œ ë©”íƒ€ í”„ë¡œê·¸ë˜ë°ì´ë¼ í•  ìˆ˜ ìˆë‹¤. ì´ì œ ê°€ì¥ ê°„ë‹¨í•œ í•„ë“œ ì£¼ì…ì˜ í˜•íƒœë¡œ ê°€ì¥ ì•ˆì „í•œ ìƒì„±ì ì£¼ì…ë°©ì‹ì€ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì´-ì§€.  
  
  
> "Bean ìˆ˜ë™ ë“±ë¡ì´ í•„ìš”í•œ ê²½ìš°"  
> ë¨¼ì € í˜¼ë™í•˜ì§€ ë§ì. ìˆ˜ë™ ë“±ë¡ì€ ì•ì„œ AppConfig ì•ˆì—ì„œ @Bean ì• ë…¸í…Œì´ì…˜ì„ í†µí•´ ë“±ë¡í–ˆë˜ ë°©ì‹ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ë ‡ê²Œ í¸í•œ ìë™ì‹œìŠ¤í…œì´ ìˆëŠ”ë° ìˆ˜ë™ì€ ì–´ë–¤ ê²½ìš°ì— í•„ìš”í• ê¹Œ? AOPë¥¼ í™œìš©í•œ ê¸°ìˆ ì§€ì› í´ë˜ìŠ¤ì˜ ê²½ìš° ìˆ˜ë™ë“±ë¡í•˜ì—¬ ì‰½ê²Œ ì½”ë“œ êµ¬í˜„ë¶€ë¥¼ ì ‘ê·¼í•˜ë©´ ì¢‹ë‹¤. ëª¨ë“  ì½”ë“œì˜ ì•ë‹¨ ë’·ë‹¨ì—ì„œ ì ìš©ë˜ëŠ” ê°œë…ì´ê¸° ë•Œë¬¸ì— ê·¸ë ‡ë‹¤.  
  
  
### ìë™ ì£¼ì…ì‹œ ì¶©ëŒ ë¬¸ì œ  
  
ì•„ë˜ì™€ ê°™ì€ Beanì´ ìë™ì£¼ì…ë˜ë©´ ì–´ë–¤ì¼ì´ ë²Œì–´ì§ˆê¹Œ?  
  
```java  
@Component  
public class FixDiscountPolicy implements DiscountPolicy {}  
  
@Component  
public class RateDiscountPolicy implements DiscountPolicy {}  
  
@Autowired  
private DiscountPolicy discountPolicy;  
```  
  
  
ì»´íŒŒì¼ëŸ¬ê°€ ì¹œì ˆí•˜ê²Œë„ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œì¼œì¤€ë‹¤. ë‹¤í–‰ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ëŸ° ì¶©ëŒì„ ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ?  ì—¬ëŸ¬ê°€ì§€ ë°©ë²™ì´ ìˆë‹¤. í•˜ë‚˜í•˜ë‚˜ì”© ì‚´í´ë³´ë„ë¡ í•˜ì.  
  
  
ë¨¼ì € í•„ë“œ ëª…ì„ Bean ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. ìŒ...ê·¹í˜ì´ë‹¤(?) ë¬¸ë²•ë§Œìœ¼ë¡œ ì•Œì•„ë‚¼ ìˆ˜ ì—†ëŠ” ì´ëŸ° ë§¤ì§ì€ ì •ë§ì´ì§€ ì‹«ë‹¤. ê·¼ë° ì•„ë¬´íŠ¼ ëœë‹¤.  
  
```java  
@Autowired  
private DiscountPolicy rateDiscountPolicy  
```  
  
  
ë‹¤ìŒì€ @qualifierë¥¼ í™œìš©í•´ ëª…ì‹œì  ì´ë¦„ì„ ì§€ì •í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìƒì„±ê³¼ ì‚¬ìš©ì— ì´ë¦„ì„ ë¶™ì—¬ì„œ ì§ì„ ë§ì¶˜ë‹¤.  
  
```  
@Component  
@Qualifier("mainDiscountPolicy")  
public class RateDiscountPolicy implements DiscountPolicy {}  
  
@Autowired  
public DiscountPolicy setDiscountPolicy(@Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {  
    return discountPolicy;  
}  
```  
  
  
ë‹¤ìŒì€ @Primary ì• ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ë™ì‘ì€ ê°„ë‹¨í•˜ë‹¤. @Primary ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ Beanì´ ìš°ì„ ì ìœ¼ë¡œ ì„ íƒëœë‹¤.  
  
```java  
@Component  
@Primary  
public class RateDiscountPolicy implements DiscountPolicy {}  
  
@Component  
public class FixDiscountPolicy implements DiscountPolicy {}  
```  
  
  
  
> @Primaryì™€ @Qualifierê°€ í•¨ê»˜ ì“°ì´ë©´ ì–´ë–»ê²Œ ë ê¹Œ? í•­ìƒ ê·¸ë ‡ë“¯ ëª…ì‹œì ì¸ ê²ƒì´ ìë™ë³´ë‹¤ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤. @Qualifierê°€ ìš°ì„ ì ìœ¼ë¡œ ì“°ì¸ë‹¤. ì´ëŸ° ì‚¬í•­ì€ ìœ ì¦ˆì¼€ì´ìŠ¤ê°€ ìˆëŠ”ë°, ë©”ì¸        ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ Connectorì™€ í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ Connectorê°€ ìˆì„ ë•Œ ë©”ì¸ì— @Primary, ì„œë¸Œì— í•„ìš”ì‹œ @Qualifierë¥¼ ì‚¬ìš©í•˜ë©´ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.  
  
  
### Beanì„ í™œìš©í•œ ì „ëµíŒ¨í„´ êµ¬í˜„  
  
ì•„ë˜ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë¥¼ ì „ëµíŒ¨í„´ì„ í†µí•´ êµ¬í˜„í•´ë³´ì. discount í•¨ìˆ˜ì˜ ê²°ê³¼ê°€ Policyì— ì˜í•´ ê²°ì •ë  ê²ƒì´ë‹¤.  
  
```java  
@Test  
void findAllBean() {  
    ApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class, DiscountService.class);  
  
    DiscountService discountService = ac.getBean(DiscountService.class);  
  
    Member member = new Member(1L, "userA", Grade.VIP);  
    int discountPrice = discountService.discount(member, 10000, "fixDiscountPolicy");  
  
    assertThat(discountPrice).isEqualTo(1000);  
}  
```  
  
  
ê·¸ë¦¬ê³  ì•„ë˜ ì½”ë“œì—ì„œ Mapê³¼ Listë¥¼ í†µí•´ Beanì„ ë‹¤ë°œë¡œ ì „ë‹¬ë°›ì•„ì„œ ì „ëµíŒ¨í„´ì„ êµ¬í˜„í•œë‹¤.  
  
> "Remind"  
> íƒ€ì…ìœ¼ë¡œ Beanì„ ì–»ì–´ì˜¤ë©´ ë§¤ì¹˜ë˜ëŠ” ëª¨ë“  Beanì„ ê°€ì ¸ì˜¨ë‹¤ëŠ” ê²ƒì„ ìƒê¸°í•˜ì!  
  
ì´ì œ ì•„ë˜ ì½”ë“œì—ì„œ ìƒì„±ì ì£¼ì… ë¶€ë¶„ì„ ì§‘ì¤‘í•´ì„œ ì‚´í´ë³´ì.  
  
```java  
static class DiscountService {  
   private final Map<String, DiscountPolicy> policyMap;  
   private final List<DiscountPolicy> policies;  
  
   public DiscountService(Map<String, DiscountPolicy> policyMap, List<DiscountPolicy> policies) {  
      this.policyMap = policyMap;  
      this.policies = policies;  
  
      System.out.println("policyMap = " + policyMap);  
      System.out.println("policies = " + policies);  
   }  
  
   public int discount(Member member, int price, String discountCode) {  
      DiscountPolicy discountPolicy = policyMap.get(discountCode);  
  
      System.out.println("discountCode = " + discountCode);  
      System.out.println("discountPolicy = " + discountPolicy);  
      return discountPolicy.discount(member, price);  
   }  
}  
```  
  
> "Question"  
> ì €ë ‡ê²Œ Stringìœ¼ë¡œ ì „ëµì„ ì–»ì–´ì™€ì„œ ì‹¤í–‰í•˜ëŠ”ê±¸ ì „ëµíŒ¨í„´ì´ë¼ê³  í•  ìˆ˜ ìˆì„ê¹Œ? ë” ê°ì²´ì§€í–¥ìŠ¤ëŸ¬ìš´ ë°©ë²•ì´ ìˆì„ì§€ ëª¨ë¥¸ë‹¤. ì—°êµ¬í•´ë³´ì.  
  
  
ì‹¤ë¬´ì ìœ¼ë¡œ ì¤‘ìš”í•œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ Bean ìë™ì£¼ì…ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ë‹¤. ì œë²• ë¶„ëŸ‰ì´ ë§ì•˜ë‹¤. ì´ì œë¶€í„°ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ëœ ì¤‘ìš”í•œ ë¶€ë¶„ë“¤ì„ ì •ë¦¬í•˜ê³  ìŠ¤í”„ë§ ê¸°ë³¸ì›ë¦¬ì— ëŒ€í•œ ì •ë¦¬ë¥¼ ë§ˆë¬´ë¦¬í•´ë³´ë„ë¡ í•˜ì!  
