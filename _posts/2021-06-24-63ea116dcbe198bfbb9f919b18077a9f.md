---
title:  ğŸ­Goroutine

subtitle:  í‘ë§ˆë²•ì‚¬ê°€ ë˜ì–´ë³´ì
categories: language 
tags: golang  goroutine
 
toc: true
toc_sticky: true
---

  
  
![]({{ site.url }}{{ site.baseurl }}/assets/images/63ea116dcbe198bfbb9f919b18077a9f/img.png)  
  
ë“œë””ì–´ Golangì„ ë°°ìš°ëŠ” ê°€ì¥ í° ì´ìœ ì¸ ê³ ë£¨í‹´(Goroutine) ì†Œê°œì´ë‹¤.  
ë…¸ë§ˆë“œì½”ë” ì‚¬ì´íŠ¸ì˜ go ì–¸ì–´ ê°•ì¢Œë¥¼ í†µí•´ ê³µë¶€í•˜ì˜€ë‹¤.  
  
## í•œë²ˆ ì‚¬ìš©í•´ë³´ì  
```go  
func sexyCount(person string) {  
	for i := 0; i < 10; i++ {  
		fmt.Println(person, "is sexy", i)  
		time.Sleep(time.Second)  
	}  
}  
  
func main() {  
	go sexyCount("nico")  
	sexyCount("flynn")  
}  
```  
  
ë‘ ë²ˆì˜ sexyCount í˜¸ì¶œì´ ìˆëŠ”ë° ë™ì‹œì— ì‹¤í–‰ì´ ëœë‹¤.  
  
`go`ë§Œ ì•ì— ë¶™ì´ë©´ `concurrenncy`í•˜ê²Œ ëŒì•„ê°€ëŠ” ê²ƒì´ë‹¤.  
ê³¨ë•Œë¦°ë‹¤ ì •ë§â€¦  
  
```go  
func main() {  
	go sexyCount("nico")  
	go sexyCount("flynn")  
}  
```  
  
ì´ë ‡ê²Œ í•˜ë©´?  
ì•„ë¬´ì¶œë ¥ ì—†ì´ í”„ë¡œê·¸ë¨ì´ ëë‚˜ë²„ë¦°ë‹¤.  
  
**mainí•¨ìˆ˜ëŠ” goroutineì„ ê¸°ë‹¤ë¦¬ì§€ ì•ŠëŠ”ë‹¤!**  
  
ì–´ì°Œë˜ì—ˆê±´ ì „ì²´ íë¦„ì€ ìˆì–´ì•¼í•˜ëŠ” ê²ƒì´ë‹¤.  
  
```go  
go sexyCount("nico")  
go sexyCount("flynn")  
time.Sleep(time.Second * 5)  
```  
  
ì´ëŸ°ì‹ìœ¼ë¡œ sleepì„ í•´ë³´ë©´ ì˜ëŒì•„ê°„ë‹¤.  
  
## Channel  
ë‹¤ìŒì€ Channelê°œë…ì´ë‹¤.  
  
`channel`ì€ `goroutine`ê³¼ `main í•¨ìˆ˜` ì‚¬ì´ì— ì •ë³´ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ë‹¤.  
  
ê²°êµ­ ë©€í‹°ì½”ì–´ë¡œ ë©€í‹°ì“°ë ˆë“œë¥¼ ëŒë¦°ë‹¤ëŠ” ê²ƒì€ **ê²°ê³¼ë¥¼ ì·¨í•©í•˜ëŠ” ì¼**ì´ ìƒê¸°ê²Œ ë˜ì–´ ìˆë‹¤.  
ê·¸ëŸ´ ë•Œë¥¼ ìœ„í•´ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì±„ë„ì´ë‹¤.  
  
í˜¹ì€ `goroutine`ê³¼ `goroutine` ì‚¬ì´ì— í†µì‹ ì„ ìœ„í•´ì„œë„ ì“°ì¼ ìˆ˜ ìˆë‹¤.  
ë³´í†µì˜ ë©€í‹°ì“°ë ˆë“œ í”„ë¡œê·¸ë˜ë°ì´ë¼ê³  ìƒê°í•œë‹¤ë©´ ì´ëŸ°ì¼ì„ í•˜ê¸°ìœ„í•´ ì•„ì£¼ í° ë…¸ë ¥ì´ ë“¤ê²ƒì´ë‹¤.  
(C++ë¡œ í•œë‹¤ê³  ìƒê°ì„ í•´ë³´ìâ€¦)  
  
```go  
func main() {  
	c := make(chan bool)        // 1. ì±„ë„ì„ ë§Œë“ ë‹¤ cëŠ” ì±„ë„ì˜ ì´ë¦„ì´ë‹¤  
	people := [2]string{"nico", "flynn"}  
	for _, person := range people {  
		go isSexy(person, c)    // 2. ê³ ë£¨í‹´ì˜ ì¸ìë¡œ ì±„ë„ì„ ë„˜ê²¨ì¤€ë‹¤  
	}  
	fmt.Println(<-c)    // 5. <- ì—°ì‚°ìë¡œ ì±„ë„ë¡œë¶€í„° ê°’ì„ ë°›ëŠ”ë‹¤. ê·¸ë¦¬ê³  ë°›ì„ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤. sleep í•„ìš”ì—†ë‹¤.  
	fmt.Println(<-c)    // <-ë¥¼ ì“°ë©´ ì´ ë¬¸ì¥ì€ ë¸”ë¡œí‚¹ì—°ì‚°ì´ ëœë‹¤.  
	fmt.Println(<-c)    // ê³ ë£¨í‹´ì€ ë‘ê°œê°€ ë„ëŠ”ë° 3ê°œì˜ ì±„ë„ì„ ê¸°ë‹¤ë¦¬ë¯€ë¡œ ë°ë“œë½ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì´ ì£½ëŠ”ë‹¤.  
}  
  
func isSexy(person string, c chan bool) {    // 3. ì±„ë„ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ íŒŒë¼ë©”í„°ë¥¼ ì¶”ê°€í•œë‹¤  
	time.Sleep(time.Second * 5)  
	fmt.Println(person)  
	c <- true      // 4. ì±„ë„ë¡œ ê°’ì„ ì¤€ë‹¤. ë¦¬í„´ê°™ì€ ê°œë…ì´ë‹¤.  
}  
  
result := <-c;  
```  
  
`:= <-`ë¼ë‹ˆâ€¦ë­”ê°€ ê³ ëŒ€ë¬¸ììŠ¤ëŸ½ì§€ë§Œ ì €ê²ƒì´ ê²°ê³¼ë¥¼ ì·¨í•©ë°›ê¸° ìœ„í•œ ì½”ë“œì´ë‹¤.  
ê¸°ê´´í•˜ë‹¤ê³  ìƒê°í•˜ì§€ë§ê³  ê·€ì—½ë‹¤ê³  ìƒê°ì„ í•´ë³´ì(..)  
  
  
`func hitURL(url string, c chan<- result) `  
  
ì—¬ê¸°ì„œ `chan<-` ì´ ì˜ë¯¸ëŠ” ì±„ë„ì„ í†µí•œ sendOnlyë¼ëŠ” ëœ»ì´ë‹¤.  
hitURLì—ì„œëŠ” ì±„ë„ì„ í†µí•´ ë°ì´í„°ë¥¼ ë°›ì„ìˆ˜ëŠ” ì—†ë‹¤. í™”ì‚´í‘œê°€ ì˜¤ë¥¸ìª½ì¸ì§€ ì™¼ìª½ì¸ì§€ë¥¼ êµ¬ë¶„í•˜ì.  
