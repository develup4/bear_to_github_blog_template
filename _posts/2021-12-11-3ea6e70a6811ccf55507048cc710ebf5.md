---
title:  📡무선통신의 모든 겉핥기

subtitle:  진짜 겉핥기
categories: 무선통신 
tags: protocol
 
toc: true
toc_sticky: true
---

  
## 도입  
[image:DBF748C8-1446-418B-A2F4-CDB899419362-28955-000063AB8C3B4742/image.png]  
  
OSI 7 Layer는 컴퓨터공학 전공자나 혹은 전공자가 아니더라도 공부를 하다보면 흔히 접하게 될 것이다. 흔히 면접에서 물어본다고 하기도 하니까. 이젠 네트워크와 데이터 통신 과목에서 배우던 유선 통신보다는 훨씬 중요한 무선 통신의 세계. 역사는 제법 되었는데 여전히 어려운 전화(호처리). 아무렇지도 않게 쓰는 그 전화의 방식에 대해 정리해본다. 역시나 레이어별로. 다만 OSI 7 Layer와 3gpp라는 기관에서 정리한 무선통신 스펙은 레이어의 세부 구분이 조금 다르다. 아래에서부터 밑바닥부터 알아보자.  
(겉핥기이므로 무선통신 전공자가 보기에는 오류투성이 일 것이다. 큰 흐름만 느껴보자)  
  
[image:DEC095AD-D3C9-452B-8F92-F23BBA4E6305-28955-000063B37B3B0C60/image.png]  
(그냥 전화라는 것도 이렇게 복잡하다)  
  
## PHY  
RF라는 안테나가 특정 파동을 잡아낸다.  
보통 그 파동의 높이를 이용해 0, 1로 바꾸는 과정까지는 많이들 이해하겠지만  
일단 고등학교 수학수준으로 보면, 복소 공간에서 실수부와 허수부를 이용해 공간을 사분면처럼 나타낼 수 있다.  
이 파동의 점이 이 사분면의 어느곳에 해당하는지 알아냄으로서 한 점에서 4bit를 담을 수 있게 되었다.  
이러한 차원이 쭉쭉 늘어나면서 64개까지 공간을 나눠서 한 점에서 데이터를 64bit까지 담아내게 된다.  
이러한 과정에서  
모듈레이션  
디모듈레이션을 하는게 모뎀이다.  
이름부터가 그렇다. mo.  dem  
인터리빙도 한다 왜하더라.  
이런것들이 phy의 영역이다.  
나도 잘모른다.  
  
## L1  
파이에서 보듯 이러한일은 소프트웨어보다는 하드웨어의 영역이다. 이러한 하드웨어를 조작하는 임베디드 소프트웨어가 들어가는 자리가 l1이다. osi상의 l1에는 phy, l1이 합쳐진 개념이다.  
  
## L2  
이제 데이터의 디지털화는 모두 완료되었다. 데이터 무결성을 위해 l2가 있다.  
  
### mac  
아직까지는 하드웨어의 영향이 있다. 물리적 채널을 논리적 채널로 바꿔주는 역할을 하고 일부 하드웨어를 이용한 시큐리티 기능도 담당한다. 여기 상위부터는 논리적채널을 다루게 된다. harq라고 일부 데이터 재전송도 담당한다.  
  
### rlc  
lte에서의 레이어명이지만 일반적이므로 쓴다. 여기서는 다소 익숙한 개념을 다루게 되는데 arq이다. auto repeat 어쩌고인데, 우리가 소프트웨어 레벨에서 tcp가 하는일같은걸 한다. 데이터를 capa에 맞게 잘라서 번호를 매겨서 보내고, 받아서 순서대로 조립하는일을 하고, 중간에 안오면 재전송을 유도해서 다시 받고 이러한 일들을 한다. 이런일을 하는데 또 위에서는 tcp에서 또한다. 조립의 단위가 다를뿐.  
arq는 소프트웨어의 영역인데 성능을 위해 일부 하드웨어가 대충 재전송을 진행하기도 하는데 아까 mac에서 적은 harq기능이다.  
  
### pdcp  
rlc에서 올라온 데이터에 대해 integrity나 패킷헤더 압축등을 진행한다.  
  
  
## L3  
l3는 l2와는 다른 역할을 한다. 마냥 상위라기보다는 다른 롤에 가깝다. l2의 역할을 유저플레인을 담당하는 것이고 l3의 역할은 컨트롤플레인을 담당하는 것이다. 전송되는 데이터중에는 실제 데이터와 제어를 위한 신호 데이터가 있는데 각자 전자,후자를 담당한다.  
  
### rrm  
무선 신호에 대한 measure를 담당하는 레이어이다. 사실 l1에 더 가까운 레이어일지도 모른다.  
  
### rrc  
무선통신에서 core network의 말단에 해당하는 것은 eNodeB(기술에 따라 이름은 다르지만) 즉 기지국이다.  
기지국과 단말의 통신을 담당하는 레이어이고 굉장히 하는일이 다양하다. 가장 중요하고 어려운 일은 핸드오프인데, 무선전화는 이동하면서 쓰다보니 이 기지국의 영역에서 저 기지국의 영역으로 넘어가는 일이 있다. 이런것이 핸드오프이고 rrc가 그 시나리오를 담당한다. 현재 기지국의 신호가 약해지면 심리스하게 넘어갈 수 있도록 잘한다.  
  
## NAS  
코어 네트워크와의 통신을 담당한다. 실제 통신은 기지국을 통해서 하겠지만 논리적으로 코어네트워크와 페어이다. 코어네트워크라함은 무선통신망 뿐만아니라 통신사의 핵심 통신망을 의미한다.  
  
### CC  
call control을 담당하는 레이어이다. 전화를 걸때 받을때의 시나리오를 관장한다. 우리가 전화를 걸면 통화음이 걸리고 번호를누르면 특정 톤이 나오고 전화가 올때 받기를누르면 일어나는 일이라던지 생각보다 디테일한 일을 담당한다. 하지만 시나리오를 관장하는 것이지 음성 데이터 전송을 담당하는 것은 아니다.  
패킷망에서는 ps connection도 관리한다.  
  
### SM  
session manager이다. 우리가 웹에서 쓰는 것처럼 전화를 걸면 세션이 생기고 그를 관리하는 것이다.  
  
### MM  
mobility manager이다. 우리가 전화를 걸면 상대방이 어디에 있는지 알아야 그곳에 있는 기지국을 통해서 전화를 연결할 것이다. 그래서 단말은 현재 있는 지역에 Registration이라는 절차를 진행해서 내가 이곳에 있음을 알린다. 이 절차는 다른 지역으로 넘어갈때라던지 일정 시간이 지나는 경우 단말이 켜지는 경우 등등 특정 조건에 의해 이루어진다. registration이 이루어지지 못하면 휴대폰은 깡통이라고 할수 있다. 그리고 MM은 RRC와 다른 NAS 레이어와의 접점 역할도 하게되는데 왜 그런지는 모르겠다. 심지어 시큐리티도 다룬다.  
ueid 관리 => 레지하니까 당연히 관리  
  
## QM  
스펙에 제대로 정의된 레이어는 아니지만 qos 담당  
  
  
  
우리가 흔히 쓰는 전화. 결코 쉬운 기술이 아니었다. 전화야 뭐 기본적으로 되어야하는거니 쉽게 생각할수 있지만 아직도 아직도 어려운 기술이다. 무선통신이란.  
  
## (부록1) RAT(Radio Access Technology)  
우리가 흔히 말하는 LTE, 5G와 같은 무선통신 세대를 RAT이라고 부른다. RAT은 세대가 바뀐다고 대체되는 개념은 아니다. 여전히 2G는 살아남아 여러 국가에서 쓰이고 있다. 특히나 광활한 땅을 가진 미국, 호주 등은 영원히 남아있을지도 모른다. 심지어는 통신망 상황에 따라 5G에서 LTE, LTE에서 3G로 바뀌어 동작하는 모습을 한번은 목격하였을 것이다. 이렇게 사용하는 RAT에 따라 이전 RAT의 context나 쌓여있는 버퍼의 데이터를 넘겨주기도 한다. 이렇게 여러 RAT은 서로 연동하기도 한다.  
  
이러한 RAT에도 두 줄기가 있는데 그것은 3gpp라는 기관과 3gpp2라는 기관이다. 현재는 3gpp의 압승이지만 3G때 CDMA 기술까지만해도 3gpp2의 위상도 낮지 않았다. 이들은 간혹 경쟁 관계에 있는 다른 기술을 채택하여 경쟁하기도 하였다. 예를 들면 데이터를 시간단위로 자르는 TDD 방식과 주파수에 따른 공간 개념의 FDD와 같이 다른 기술을 사용하였다. 이 두 기관 외에도 WiMax라던지 여러가지 기술이 경합하며 역사가 이루어져 왔다. 아래 그림처럼.  
  
## (부록2) CS망과 PS망  
전통적인 음성 통신망을 CS망이라고 부르며 아직도 여전히 존재한다. 구닥다리 유선전화와 스마트폰 모두 동일하게 사용한다. 하지만 요즘 OTT, IPTV 등 여러가지 디지털 TV처럼 전화도 우리가 쓰는 인터넷처럼 데이터 패킷을 이용하여 이루어지기도 하는데, 보이스톡과 같은 VoIP가 아니더라도 통신사 자체의   
  
## (부록3) 알아두면 일상생활에서도 도움이 될지도 모르는 용어들  
IMEI  
IMSI : 전화번호다. 전화번호는 그 자체로 식별자이다. MCC, MNC, MIN(Mobile Identity Number)  
TMSI(Temporary Mobile Station Identity) : 보안용으로 쓰는 임시로 부여받는 식별자  
  
위에꺼는 심에 부여되는 값이다. 그래서 단말에 심을 바꿔끼우면 다른 전화번호가 될 수 있는 것이다.  
  
ESN : 단말의 고유번호  
MEID  
