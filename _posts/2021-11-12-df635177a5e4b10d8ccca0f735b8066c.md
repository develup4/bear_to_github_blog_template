---
title:  ğŸƒSpring AutoConfiguration

categories: ìŠ¤í”„ë§ë¶€íŠ¸ 
tags: backend  java  configuration
 
toc: true
toc_sticky: true
---

  
## ìŠ¤í”„ë§ì˜ ì‹œì‘ì§€ì   
```java  
@SpringBootApplication  
public class Application {  
  
    public static void main(String[] args) {  
        SpringApplication.run(Application.class, args);  
    }  
}  
```  
  
### @SpringBootApplication  
- ìœ„ ì• ë…¸í…Œì´ì…˜ì— íƒ€ê³  ë“¤ì–´ê°€ë³´ë©´ `@SpringBootConfiguration`, `@ComponentScan`, `@EnableAutoConfiguration` ì„¸ ê°œì˜ ì• ë…¸í…Œì´ì…˜ì´ í•©ì³ì ¸ ìˆëŠ” í˜•íƒœì´ë‹¤.  
  
> ìŠ¤í”„ë§ ë¶€íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ `Bean`ì„ ë“±ë¡í•˜ëŠ” ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.    
> 1ë‹¨ê³„: `@ComponentScan`ìœ¼ë¡œ ì°¾ì€ Beanì„ ë“±ë¡í•œë‹¤.    
> 2ë‹¨ê³„: `@EnableAutoConfiguration`ìœ¼ë¡œ ì¶”ê°€ì ìœ¼ë¡œ ì½ì–´ì˜¨ Beanì„ ë“±ë¡í•œë‹¤.    
  
#### @ComponentScan  
- ìê¸° ìì‹ ì´ ìœ„ì¹˜í•œ íŒ¨í‚¤ì§€ë¡œë¶€í„° í•˜ìœ„ì˜ íŒ¨í‚¤ì§€ë¥¼ ìŠ¤ìº”í•´ì„œ Beanì„ ë“±ë¡í•œë‹¤. ëŒ€í‘œì ì¸ ê²€ìƒ‰ëŒ€ìƒì€  `@Configuration`, `@Repository`, `@Service`, `@Controller`, `@RestController`ì´ë‹¤.  
  
#### @EnableAutoConfiguration  
- `Configuration`ì´ë€ Beanì„ ì½ì–´ì˜¤ê¸° ìœ„í•œ ì¡°ê±´ì´ ì •ì˜ëœ **ì„¤ì • íŒŒì¼**ì´ë‹¤.  
- `org.springframework.boot.autoconfigure` íŒ¨í‚¤ì§€ì—ì„œ `spring.factories` íŒŒì¼ì„ ì—´ì–´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ìˆ˜ë§ì€ í‚¤ê°’ì´ ì í˜€ìˆë‹¤.  
  
![]({{ site.url }}{{ site.baseurl }}/assets/images/df635177a5e4b10d8ccca0f735b8066c/img.png)  
  
- ìœ„ íŒŒì¼ì— ì •ì˜ëœ Configurationì— ì˜í•´ `Bean`ë“¤ì´ ìƒì„±ë˜ê²Œ ëœë‹¤.  
  
## Configuration ì‘ì„±  
- Configurationì€ ë³„ë„ì˜ í”„ë¡œì íŠ¸ë¡œ ì‘ì„±í•˜ì—¬ jar í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  
- ì‘ì„±ì´ ëë‚œ ë’¤ì—ëŠ” `mvn install` ëª…ë ¹ì„ í†µí•´ **Local Repository**ì— ì„¤ì¹˜ë˜ì–´ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ í™œìš©í•  ìˆ˜ ìˆë‹¤.  
- ì•„ë˜ì™€ ê°™ì´ IntelliJ ë©”ë‰´ë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ë„ ìˆë‹¤.  
  
![]({{ site.url }}{{ site.baseurl }}/assets/images/df635177a5e4b10d8ccca0f735b8066c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-11-13%20%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB%201.36.20.png)  
  
### ì˜ì¡´ì„± ì„¤ì •  
- `Configuration`ì„ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € `pom.xml`ë¶€í„° ì„¤ì •í•œë‹¤.  
  
```xml  
<dependencies>  
	<dependency>  
		<groupId>org.springframework.boot</groupId>  
		<artifactId>spring-boot-autoconfigure</artifactId>  
	</dependency>  
	<dependency>  
		<groupId>org.springframework.boot</groupId>  
		<artifactId>spring-boot-autoconfigure-processor</artifactId>  
		<optional>true</optional>  
	</dependency>  
</dependencies>  
  
<!-- ìœ„ì—ì„œ ì¶”ê°€í•œ ë‘ ê°œì˜ ì˜ì¡´ì„±ì˜ ë²„ì „ ê´€ë¦¬ë¥¼ ìœ„í•œ ì˜ì—­ -->  
<dependencyManagement>  
	<dependencies>  
		<dependency>  
			<groupId>org.springframework.boot</groupId>  
			<artifactId>spring-boot-dependencies</artifactId>  
			<version>2.0.3.RELEASE</version>  
			<type>pom</type>  
			<scope>import</scope>  
		</dependency>  
	</dependencies>  
</dependencyManagement>  
```  
  
### Configuration ì‘ì„±  
- `@Configuration`ì„ ë¶™ì¸ í´ë˜ìŠ¤ ë‚´ì— `Bean`ì„ ì„ ì–¸í•œë‹¤.  
- `@ConditionalOnMissingBean`ì„ ì£¼ì˜í•˜ì. ì—†ëŠ” ê²½ìš° ëª…ì‹œì ì¸ Beanë³´ë‹¤ Configurationì´ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ë‹¤.  
  
```java  
import org.springframework.context.annotation.Bean;  
import org.springframework.context.annotation.Configuration;  
  
@Configuration  
public class PersonConfiguration {  
  
	@Bean  
	@ConditionalOnMissingBean	// ì´ Configurationì„ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ê°™ì€ Beanì´ ìˆìœ¼ë©´ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.  
	public Person person() {  
		Person person = new Person();  
		person.setAge(40);  
		person.setName("ê¹¨ë°œì");  
		return person;  
	}  
}  
```  
  
### spring.factories íŒŒì¼ ì‘ì„±  
- `main/resources/META-INF` ë””ë ‰í† ë¦¬ì— `spring.factories` íŒŒì¼ì„ ìƒì„±í•œë‹¤.  
- ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ì–´ì¤€ ì„¤ì • íŒŒì¼ì„ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•œë‹¤.  
  
```  
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\  
	com.develop4.PersonConfiguration  
```  
  
- ëª¨ë“  ì‘ì„±ì´ ëë‚¬ìœ¼ë©´ ì²˜ìŒì— ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ `mvn install`ì„ í†µí•´ ì„¤ì¹˜í•œë‹¤.  
  
### ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ Configuration ì‚¬ìš©  
- ì•„ë˜ì™€ ê°™ì´ `pom.xml`ì— ì„¤ì¹˜í•œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤.  
  
```xml  
<dependency>  
	<groupId>com.develop4</groupId>  
	<artifactId>cfg-test-spring-boot-starter</artifactId>  
	<version>1.0-SNAPSHOT</version>  
</dependency>  
```  
  
- ì•„ë˜ì™€ ê°™ì´ Beanì´ ìë™ ìƒì„±ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  
  
```java  
@Component  
public class PersonRunner implements ApplicationRunner {  
  
	@Autowired  
	Person person;	// ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë§Œë“ ì ì´ ì—†ëŠ” Beanì´ Configurationì„ í†µí•´ ì£¼ì…ëœë‹¤.  
  
	public void run(ApplicationArguments args) throws Exception {  
		System.out.println(person);  
	}  
}  
```  
  
## ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì–´ë–»ê²Œ ë°”ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆì„ê¹Œ?  
```java  
@RestController  
public class UserController {  
	@GetMapping  
	public String hello() {  
		return "hello";  
	}  
}  
```  
  
- ìƒê°í•´ë³´ë©´ ìš°ë¦¬ëŠ” ê·¸ëƒ¥ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì—ˆì„ ë¿ì´ë‹¤. ë¬¼ë¡  `@RestController`ë¥¼ í†µí•´ Beanìœ¼ë¡œ ë“±ë¡ì´ ë ê±°ê³  ì–´ë–»ê²Œë“  ê°€ì ¸ê°€ì„œ REST APIë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ë‚´ê² ì§€ë¼ê³  ìƒê°í•´ë³¼ ìˆ˜ëŠ” ìˆë‹¤.  
- êµ¬ì²´ì ì¸ êµ¬í˜„ì€ `WebMvcAutoConfiguration`ì´ë¼ëŠ” AutoConfigurationì„ í†µí•´ ì„¤ì •ëœë‹¤. Converter, Interceptor, ResourceHandler, CorsMapping, ViewResolver, ArgumentResolver, Message Converterì™€ ê°™ì€ ë‹¤ì–‘í•œ ì„¤ì •ì´ ì œê³µëœë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ íŠ¹ë³„í•œ ì¼ì´ ì—†ë‹¤ë©´ ìœ„ì²˜ëŸ¼ ë°”ë¡œ ì›¹ ê°œë°œì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.  
  
- - - -  
[1] ë°±ê¸°ì„ , ìŠ¤í”„ë§ ë¶€íŠ¸ ê°œë…ê³¼ í™œìš©, 3ë¶€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì›ë¦¬  
