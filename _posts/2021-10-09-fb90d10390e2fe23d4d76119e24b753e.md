---
title:  ğŸƒì„œë¸”ë¦¿ì´ ìŠ¤í”„ë§ì´ ë˜ì–´ê°€ëŠ”ê³¼ì •

subtitle:  Spring MVC
categories: ìŠ¤í”„ë§ë¶€íŠ¸ 
tags: backend  java  servlet
 
toc: true
toc_sticky: true
---

  
  
ê¹ƒí—™ ë§í¬  
  
ìˆ˜ì—…ìë£Œ ì†ŒìŠ¤ì½”ë“œë¥¼ ë°›ì•„ì„œ ê¹ƒí—™ì—ì˜¬ë¦¬ê³  ìˆ˜ì—…ìë£Œë³´ë©´ì„œ ì£¼ì„ì„ ë‹¬ì  
  
  
ì„œë¸”ë¦¿ì´ ìŠ¤í”„ë§ì´ ë˜ì–´ê°€ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ë©´ ë ˆê±°ì‹œë¥¼ ì˜ wrappingí•´ì„œ í”„ë ˆì„ì›Œí¬ë¥¼ ë§Œë“œëŠ” ì•„ë¦„ë‹¤ìš´ ì˜ˆì¸ ê²ƒ ê°™ë‹¤. ì„œë¸”ë¦¿ì˜ ê°„ë‹¨í•œ ì‚¬ìš©ë²•ë¶€í„° ì‹œì‘í•´ì„œ ìŠ¤í”„ë§ì´ ë˜ì–´ê°€ëŠ” ê³¼ì •ì„ ìˆœì°¨ì ìœ¼ë¡œ ì •ë¦¬í•´ë³´ë ¤ í•œë‹¤.  
  
  
  
## ê¸°ì¡´ MVCì˜ í•œê³„  
ì„œë¸”ë¦¿/JSP í¬ìŠ¤íŠ¸ì—ì„œ ë§ˆì§€ë§‰ì— êµ¬í˜„í–ˆë˜ MVC íŒ¨í„´ì€ ê¸°ì¡´ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ë‚˜ë¦„ì˜ ê¹”ë”í•œ êµ¬ì¡°ë¼ê³  ë³¼ìˆ˜ë„ ìˆì§€ë§Œ, ë” ê¹”ë”í•˜ê³  ì¤‘ë³µì—†ëŠ” ì½”ë“œê°€ ë  ì—¬ì§€ê°€ ìˆë‹¤.  
  
MVC ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë‹¨ì   
í¬ì›Œë“œ ì¤‘ë³µ  
Viewë¡œ ì´ë™í•˜ëŠ” ì½”ë“œê°€ í•­ìƒ ì¤‘ë³µ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤. ë¬¼ë¡  ì´ ë¶€ë¶„ì„ ë©”ì„œë“œë¡œ ê³µí†µí™”í•´ë„ ë˜ì§€ë§Œ, í•´ë‹¹ ë©”ì„œë“œë„ í•­ìƒ ì§ì ‘ í˜¸ì¶œí•´ì•¼ í•œë‹¤.  
  RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);  
  dispatcher.forward(request, response);  
ViewPathì— ì¤‘ë³µ  
String viewPath = "/WEB-INF/views/new-form.jsp";  
prefix: /WEB-INF/views/  
suffix: .jsp  
ê·¸ë¦¬ê³  ë§Œì•½ jspê°€ ì•„ë‹Œ thymeleaf ê°™ì€ ë‹¤ë¥¸ ë·°ë¡œ ë³€ê²½í•œë‹¤ë©´ ì „ì²´ ì½”ë“œë¥¼ ë‹¤ ë³€ê²½í•´ì•¼ í•œë‹¤.  
ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ  
ë‹¤ìŒ ì½”ë“œë¥¼ ì‚¬ìš©í•  ë•Œë„ ìˆê³ , ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•Œë„ ìˆë‹¤. íŠ¹íˆ responseëŠ” í˜„ì¬ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.  
  HttpServletRequest request, HttpServletResponse response  
       
   ê·¸ë¦¬ê³  ì´ëŸ° HttpServletRequest , HttpServletResponse ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ê¸°ë„ ì–´ë µë‹¤.  
ê³µí†µ ì²˜ë¦¬ê°€ ì–´ë µë‹¤.  
ê¸°ëŠ¥ì´ ë³µì¡í•´ì§ˆ ìˆ˜ ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ì ì  ë” ë§ì´ ì¦ê°€í•  ê²ƒì´ë‹¤. ë‹¨ìˆœíˆ  
ê³µí†µ ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë½‘ìœ¼ë©´ ë  ê²ƒ ê°™ì§€ë§Œ, ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í•­ìƒ í˜¸ì¶œí•´ì•¼ í•˜ê³ , ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ë  ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  í˜¸ì¶œí•˜ëŠ” ê²ƒ ìì²´ë„ ì¤‘ë³µì´ë‹¤.  
ì •ë¦¬í•˜ë©´ ê³µí†µ ì²˜ë¦¬ê°€ ì–´ë µë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.  
ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ ì „ì— ë¨¼ì € ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. ì†Œìœ„ ìˆ˜ë¬¸ì¥ ì—­í• ì„ í•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤. í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(Front Controller) íŒ¨í„´ì„ ë„ì…í•˜ë©´ ì´ëŸ° ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. (ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ!)  
ìŠ¤í”„ë§ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ ì´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì— ìˆë‹¤.  
  
## í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´  
ìŠ¤í”„ë§ ì›¹ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ FrontController  
ìŠ¤í”„ë§ ì›¹ MVCì˜ DispatcherServletì´ FrontController íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŒ  
  
P67 ê·¸ë¦¼ ì²¨ë¶€  
  
  
í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ìŒ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œ ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ!  
  
 ê³µí†µ ì²˜ë¦¬ ê°€ëŠ¥  
í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë¨  
  
  
### V1  
p68 ê·¸ë¦¼  
  
```  
@WebServlet(name = "frontControllerServletV1", urlPatterns = "/front-  
controller/v1/*")  
public class FrontControllerServletV1 extends HttpServlet {  
    private Map<String, ControllerV1> controllerMap = new HashMap<>();  
    public FrontControllerServletV1() {  
        controllerMap.put("/front-controller/v1/members/new-form", new  
MemberFormControllerV1());  
        controllerMap.put("/front-controller/v1/members/save", new  
MemberSaveControllerV1());  
        controllerMap.put("/front-controller/v1/members", new  
MemberListControllerV1());  
    }  
@Override  
    protected void service(HttpServletRequest request, HttpServletResponse  
response)  
            throws ServletException, IOException {  
        System.out.println("FrontControllerServletV1.service");  
        String requestURI = request.getRequestURI();  
        ControllerV1 controller = controllerMap.get(requestURI);  
        if (controller == null) {  
response.setStatus(HttpServletResponse.SC_NOT_FOUND);return; }  
          controller.process(request, response);  
      }  
}  
```  
  
  
### V2  
ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë·°ë¡œ ì´ë™í•˜ëŠ” ë¶€ë¶„ì— ì¤‘ë³µì´ ìˆê³ , ê¹”ë”í•˜ì§€ ì•Šë‹¤.  
  String viewPath = "/WEB-INF/views/new-form.jsp";  
  RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);  
  dispatcher.forward(request, response);  
ì´ ë¶€ë¶„ì„ ê¹”ë”í•˜ê²Œ ë¶„ë¦¬í•˜ê¸° ìœ„í•´ ë³„ë„ë¡œ ë·°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì.  
  
p74 ê·¸ë¦¼  
  
```  
public class MemberFormControllerV2 implements ControllerV2 {  
@Override  
      public MyView process(HttpServletRequest request, HttpServletResponse  
  response) throws ServletException, IOException {  
          return new MyView("/WEB-INF/views/new-form.jsp");  
      }  
}  
  
public class MyView {  
      private String viewPath;  
      public MyView(String viewPath) {  
          this.viewPath = viewPath;  
}  
      public void render(HttpServletRequest request, HttpServletResponse  
  response) throws ServletException, IOException {  
          RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);  
          dispatcher.forward(request, response);  
      }  
}  
```  
  
  
### V3  
  
ì„œë¸”ë¦¿ ì¢…ì†ì„± ì œê±°  
ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¥ì—ì„œ HttpServletRequest, HttpServletResponseì´ ê¼­ í•„ìš”í• ê¹Œ?  
ìš”ì²­ íŒŒë¼ë¯¸í„° ì •ë³´ëŠ” ìë°”ì˜ Mapìœ¼ë¡œ ëŒ€ì‹  ë„˜ê¸°ë„ë¡ í•˜ë©´ ì§€ê¸ˆ êµ¬ì¡°ì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„œë¸”ë¦¿ ê¸°ìˆ ì„ ëª°ë¼ë„ ë™ì‘í•  ìˆ˜ ìˆë‹¤.  
ê·¸ë¦¬ê³  request ê°ì²´ë¥¼ Modelë¡œ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ ì— ë³„ë„ì˜ Model ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•˜ë©´ ëœë‹¤. ìš°ë¦¬ê°€ êµ¬í˜„í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„œë¸”ë¦¿ ê¸°ìˆ ì„ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ë³€ê²½í•´ë³´ì.  
ì´ë ‡ê²Œ í•˜ë©´ êµ¬í˜„ ì½”ë“œë„ ë§¤ìš° ë‹¨ìˆœí•´ì§€ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì´ ì‰½ë‹¤.  
ë·° ì´ë¦„ ì¤‘ë³µ ì œê±°  
ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§€ì •í•˜ëŠ” ë·° ì´ë¦„ì— ì¤‘ë³µì´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  
ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë°˜í™˜í•˜ê³ , ì‹¤ì œ ë¬¼ë¦¬ ìœ„ì¹˜ì˜ ì´ë¦„ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë‹¨ìˆœí™” í•˜ì.  
ì´ë ‡ê²Œ í•´ë‘ë©´ í–¥í›„ ë·°ì˜ í´ë” ìœ„ì¹˜ê°€ í•¨ê»˜ ì´ë™í•´ë„ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë§Œ ê³ ì¹˜ë©´ ëœë‹¤.  
  
  
P81 ê·¸ë¦¼  
  
```  
  public class MemberSaveControllerV3 implements ControllerV3 {  
      private MemberRepository memberRepository = MemberRepository.getInstance();  
//HttpServletRequestê°€ ì œê³µí•˜ëŠ” íŒŒë¼ë¯¸í„°ëŠ” í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ paramMapì— ë‹´ì•„ì„œ í˜¸ì¶œí•´ì£¼ë©´ ëœë‹¤.  
      @Override  
      public ModelView process(Map<String, String> paramMap) {  
          String username = paramMap.get("username");  
          int age = Integer.parseInt(paramMap.get("age"));  
          Member member = new Member(username, age);  
          memberRepository.save(member);  
  
 //ì‘ë‹µ ê²°ê³¼ë¡œ ë·° ì´ë¦„ê³¼ ë·°ì— ì „ë‹¬í•  Model ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ModelView ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´ ëœë‹¤.  
          ModelView mv = new ModelView("save-result");  
          mv.getModel().put("member", member);  
          return mv;  
} }  
  
public class ModelView {  
      private String viewName;  
       
 private Map<String, Object> model = new HashMap<>();  
      public ModelView(String viewName) {  
          this.viewName = viewName;  
}  
      public String getViewName() {  
          return viewName;  
}  
      public void setViewName(String viewName) {  
          this.viewName = viewName;  
}  
      public Map<String, Object> getModel() {  
          return model;  
}  
      public void setModel(Map<String, Object> model) {  
          this.model = model;  
} }  
```  
  
ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ ê¸°ìˆ ì„ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ êµ¬í˜„ì´ ë§¤ìš° ë‹¨ìˆœí•´ì§€ê³ , í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±ì‹œ í…ŒìŠ¤íŠ¸ í•˜ê¸° ì‰½ë‹¤.  
  
v3 front controller  
```  
@WebServlet(name = "frontControllerServletV3", urlPatterns = "/front-  
controller/v3/*")  
public class FrontControllerServletV3 extends HttpServlet {  
    private Map<String, ControllerV3> controllerMap = new HashMap<>();  
    public FrontControllerServletV3() {  
        controllerMap.put("/front-controller/v3/members/new-form", new  
MemberFormControllerV3());  
        controllerMap.put("/front-controller/v3/members/save", new  
MemberSaveControllerV3());  
        controllerMap.put("/front-controller/v3/members", new  
MemberListControllerV3());  
    }  
@Override  
protected void service(HttpServletRequest request, HttpServletResponse  
response)  
            throws ServletException, IOException {  
        String requestURI = request.getRequestURI();  
        ControllerV3 controller = controllerMap.get(requestURI);  
        if (controller == null) {  
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);  
return; }  
        Map<String, String> paramMap = createParamMap(request);  
        ModelView mv = controller.process(paramMap);  
        String viewName = mv.getViewName();  
        MyView view = viewResolver(viewName);  
        view.render(mv.getModel(), request, response);  
}  
    private Map<String, String> createParamMap(HttpServletRequest request) {  
        Map<String, String> paramMap = new HashMap<>();  
  
            request.getParameterNames().asIterator()  
                  .forEachRemaining(paramName -> paramMap.put(paramName,  
  request.getParameter(paramName)));  
          return paramMap;  
}  
      private MyView viewResolver(String viewName) {  
          return new MyView("/WEB-INF/views/" + viewName + ".jsp");  
} }  
```  
  
ì •ë¦¬í•˜ë©´ ì„œë¸”ë¦¿ì— ì¢…ì†ë˜ëŠ”ê±´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¿ì´ê³  ë¦¬í€˜ìŠ¤íŠ¸ì˜ ë°ì´í„°ë¥¼ì¶”ìƒí™”í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ì „ë‹¬í•´ì£¼ê³  ë¦¬í„´ë°›ì„ë•Œë„ jspì— ì¢…ì†ì ì´ì§€ ì•Šì€ modelviewë¥¼ ë„˜ê²¨ë°›ëŠ”ë° ì—¬ê¸°ì— ëª¨ë¸ì˜ ë°ì´í„°ì™€ ë·°ì˜ ì´ë¦„ë“±ì˜ ì •ë³´ê°€ ì˜¨ë‹¤.   
  
ë…¼ë¦¬ ë·° ì´ë¦„: members  
ë¬¼ë¦¬ ë·° ê²½ë¡œ: /WEB-INF/views/members.jsp  
  
ë·°ëŠ” jspì—ì¢…ì†ì ì´ì§€ ì•Šê²Œ ë…¼ë¦¬ì  ì´ë¦„ë§Œ ì „ë‹¬í•œë‹¤  
jspëŠ” requestì˜ attributeì— ìˆëŠ” ëª¨ë¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ë°›ì•„ì„œ setattributeí•´ì¤€ë‹¤.  
  
  
```  
public class MyView {  
    private String viewPath;  
    public MyView(String viewPath) {  
        this.viewPath = viewPath;  
}  
    public void render(HttpServletRequest request, HttpServletResponse  
response) throws ServletException, IOException {  
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);  
        dispatcher.forward(request, response);  
    }  
    public void render(Map<String, Object> model, HttpServletRequest request,  
HttpServletResponse response) throws ServletException, IOException {  
        modelToRequestAttribute(model, request);  
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);  
        dispatcher.forward(request, response);  
}  
    private void modelToRequestAttribute(Map<String, Object> model,  
HttpServletRequest request) {  
        model.forEach((key, value) -> request.setAttribute(key, value));  
    }  
}  
```  
  
  
### v4  
  
ì‚¬ì‹¤ ê±°ì˜ ë‹¤ ì™”ë‹¤ ì´ë¯¸ ê´œì°®ì€ê±°ê°™ì§€ë§Œ ë” í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•´ë³´ì  
  
ì¢‹ì€ í”„ë ˆì„ì›Œí¬ëŠ” ì•„í‚¤í…ì²˜ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê·¸ì™€ ë”ë¶ˆì–´ ì‹¤ì œ ê°œë°œí•˜ëŠ” ê°œë°œìê°€ ë‹¨ìˆœí•˜ê³  í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì†Œìœ„ ì‹¤ìš©ì„±ì´ ìˆì–´ì•¼ í•œë‹¤.  
  
  
p89ê·¸ë¦¼  
  
  
```  
public class MemberSaveControllerV4 implements ControllerV4 {  
      private MemberRepository memberRepository = MemberRepository.getInstance();  
@Override  
      public String process(Map<String, String> paramMap, Map<String, Object>  
  model) {  
          String username = paramMap.get("username");  
          int age = Integer.parseInt(paramMap.get("age"));  
          Member member = new Member(username, age);  
          memberRepository.save(member);  
          model.put("member", member);  
          return "save-result";  
} }  
```  
  
ì´ë²ˆ ë²„ì „ì€ ì¸í„°í˜ì´ìŠ¤ì— ModelViewê°€ ì—†ë‹¤. model ê°ì²´ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ì‚¬ìš©í•˜ë©´ ë˜ê³ , ê²°ê³¼ë¡œ ë·°ì˜ ì´ë¦„ë§Œ ë°˜í™˜í•´ì£¼ë©´ ëœë‹¤.  
  
```  
@Override  
    protected void service(HttpServletRequest request, HttpServletResponse  
response)  
            throws ServletException, IOException {  
        String requestURI = request.getRequestURI();  
        ControllerV4 controller = controllerMap.get(requestURI);  
        if (controller == null) {  
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);  
return; }  
Map<String, String> paramMap = createParamMap(request); Map<String, Object> model = new HashMap<>(); **//ì¶”ê°€**  
        String viewName = controller.process(paramMap, model);  
        MyView view = viewResolver(viewName);  // ì´ë¦„ìœ¼ë¡œ ìƒì„±  
        view.render(model, request, response);  
    }  
 private MyView viewResolver(String viewName) {  
          return new MyView("/WEB-INF/views/" + viewName + ".jsp");  
} }  
```  
  
í¸í•˜ê²Œ ì“°ê¸° ìœ„í•´ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¬¼ë°‘ì‘ì—…ì„ ì¡°ê¸ˆ ë” í•´ì¤€ë‹¤.  
  
  
### v5  
ë§Œì•½ ì–´ë–¤ ê°œë°œìëŠ” ControllerV3 ë°©ì‹ìœ¼ë¡œ ê°œë°œí•˜ê³  ì‹¶ê³ , ì–´ë–¤ ê°œë°œìëŠ” ControllerV4 ë°©ì‹ìœ¼ë¡œ  
ê°œë°œí•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ  
  
  
ì–´ëŒ‘í„° íŒ¨í„´  
ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ê°œë°œí•œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í•œê°€ì§€ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ControllerV3 , ControllerV4 ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ í˜¸í™˜ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë§ˆì¹˜ v3ëŠ” 110vì´ê³ , v4ëŠ” 220v ì „ê¸° ì½˜ì„¼íŠ¸ ê°™ì€ ê²ƒì´ë‹¤. ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë°”ë¡œ ì–´ëŒ‘í„°ì´ë‹¤.  
ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•´ì„œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë‹¤ì–‘í•œ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•´ë³´  
  
  
  
p96 ê·¸ë¦¼  
  
```  
public class ControllerV3HandlerAdapter implements MyHandlerAdapter {  
      @Override  
      public boolean supports(Object handler) {  
          return (handler instanceof ControllerV3);  
      }  
@Override  
      public ModelView handle(HttpServletRequest request, HttpServletResponse  
  response, Object handler) {  
 ModelView handle(HttpServletRequest request, HttpServletResponse response, Object  
handler)  
 ControllerV3 controller = (ControllerV3) handler;  
Map<String, String> paramMap = createParamMap(request);  
          ModelView mv = controller.process(paramMap);  
return mv; }  
      private Map<String, String> createParamMap(HttpServletRequest request) {  
          Map<String, String> paramMap = new HashMap<>();  
          request.getParameterNames().asIterator()  
                  .forEachRemaining(paramName -> paramMap.put(paramName,  
  request.getParameter(paramName)));  
          return paramMap;  
      }  
}  
```  
  
ì»¨íŠ¸ë¡¤ëŸ¬(Controller) í•¸ë“¤ëŸ¬(Handler)  
ì´ì „ì—ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§ì ‘ ë§¤í•‘í•´ì„œ ì‚¬ìš©í–ˆë‹¤. ê·¸ëŸ°ë° ì´ì œëŠ” ì–´ëŒ‘í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ì»¨íŠ¸ë¡¤ëŸ¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì–´ëŒ‘í„°ê°€ ì§€ì›í•˜ê¸°ë§Œ í•˜ë©´, ì–´ë–¤ ê²ƒì´ë¼ë„ URLì— ë§¤í•‘í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì´ë¦„ì„ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë” ë„’ì€ ë²”ìœ„ì˜ í•¸ë“¤ëŸ¬ë¡œ ë³€ê²½í–ˆë‹¤.  
  
  
```  
@WebServlet(name = "frontControllerServletV5", urlPatterns = "/front-  
controller/v5/*")  
public class FrontControllerServletV5 extends HttpServlet {  
    private final Map<String, Object> handlerMappingMap = new HashMap<>();  
    private final List<MyHandlerAdapter> handlerAdapters = new ArrayList<>();  
    public FrontControllerServletV5() {  
        initHandlerMappingMap();  
        initHandlerAdapters();  
}  
    private void initHandlerMappingMap() {  
        handlerMappingMap.put("/front-controller/v5/v3/members/new-form", new  
MemberFormControllerV3());  
 handlerMappingMap.put("/front-controller/v5/v3/members/save", new  
MemberSaveControllerV3());  
        handlerMappingMap.put("/front-controller/v5/v3/members", new  
MemberListControllerV3());  
}  
    private void initHandlerAdapters() {  
        handlerAdapters.add(new ControllerV3HandlerAdapter());  
}  
@Override  
    protected void service(HttpServletRequest request, HttpServletResponse  
response)  
            throws ServletException, IOException {  
        Object handler = getHandler(request);  
        if (handler == null) {  
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);  
return; }  
  
 MyHandlerAdapter adapter = getHandlerAdapter(handler);  
        ModelView mv = adapter.handle(request, response, handler);  
        MyView view = viewResolver(mv.getViewName());  
        view.render(mv.getModel(), request, response);  
    }  
    private Object getHandler(HttpServletRequest request) {  
        String requestURI = request.getRequestURI();  
        return handlerMappingMap.get(requestURI);  
}  
    private MyHandlerAdapter getHandlerAdapter(Object handler) {  
        for (MyHandlerAdapter adapter : handlerAdapters) {  
            if (adapter.supports(handler)) {  
                return adapter;  
} }  
```  
  
  
  
### ì •ë¦¬  
ì§€ê¸ˆê¹Œì§€ v1 ~ v5ë¡œ ì ì§„ì ìœ¼ë¡œ í”„ë ˆì„ì›Œí¬ë¥¼ ë°œì „ì‹œì¼œ ì™”ë‹¤. ì§€ê¸ˆê¹Œì§€ í•œ ì‘ì—…ì„ ì •ë¦¬í•´ë³´ì.  
v1: í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë„ì…  
ê¸°ì¡´ êµ¬ì¡°ë¥¼ ìµœëŒ€í•œ ìœ ì§€í•˜ë©´ì„œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë„ì…  
v2: View ë¶„ë¥˜  
ë‹¨ìˆœ ë°˜ë³µ ë˜ëŠ” ë·° ë¡œì§ ë¶„ë¦¬  
v3: Model ì¶”ê°€ ì„œë¸”ë¦¿ ì¢…ì†ì„± ì œê±°  
ë·° ì´ë¦„ ì¤‘ë³µ ì œê±°  
v4: ë‹¨ìˆœí•˜ê³  ì‹¤ìš©ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ v3ì™€ ê±°ì˜ ë¹„ìŠ·  
 êµ¬í˜„ ì…ì¥ì—ì„œ ModelViewë¥¼ ì§ì ‘ ìƒì„±í•´ì„œ ë°˜í™˜í•˜ì§€ ì•Šë„ë¡ í¸ë¦¬í•œ ì¸í„°í˜ì´ìŠ¤ ì œê³µ  
  
v5: ìœ ì—°í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ì–´ëŒ‘í„° ë„ì…  
ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•´ì„œ í”„ë ˆì„ì›Œí¬ë¥¼ ìœ ì—°í•˜ê³  í™•ì¥ì„± ìˆê²Œ ì„¤ê³„  
ì—¬ê¸°ì— ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë” í¸ë¦¬í•˜ê²Œ ë°œì „ì‹œê¸¸ ìˆ˜ë„ ìˆë‹¤. ë§Œì•½ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ë°”ë¡œ ì• ë…¸í…Œì´ì…˜ì„ ì§€ì›í•˜ëŠ” ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤!  
ë‹¤í˜•ì„±ê³¼ ì–´ëŒ‘í„° ë•ë¶„ì— ê¸°ì¡´ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©´ì„œ, í”„ë ˆì„ì›Œí¬ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.  
  
  
  
p108 ê·¸ë¦¼  
  
ì§ì ‘ ë§Œë“  í”„ë ˆì„ì›Œí¬ ìŠ¤í”„ë§ MVC ë¹„êµ   
FrontController DispatcherServlet   
handlerMappingMap HandlerMapping   
MyHandlerAdapter HandlerAdapter   
ModelView ModelAndView   
viewResolver ViewResolver  
MyView View  
