# HTTP/1.1 그리고 HTTP/2
### 2021-07-11
#backend #http

[YouTube](https://youtu.be/uhlvXrDpM-Y)

전송할 리소스가 증가했다

(옛날 야후 요즘 야후, 이미지나 동영상)

​

 http/1.0에서는 매 요청마다 커넥션을 열었다 닫았다

​

1.1에서는 persistent connection 개념이 생겼다

(무선통신 스펙의 keep alive같은 개념)

​

그리고 http pipelining이라는 개념으로 요청들을 큐에 버퍼링했다가

한번 커넥션열때 같이 처리하는 개념도 있다

​

위 두개는 그림 첨부하자

​

​

​

근데 파이프라인에서 처리하다가 특정 요청에 문제가 발생하면 뒤 요청들이 줄줄이 처리되지 못하고 블로킹되는 병목 문제가 있다.

​

이를 막기위해 분산된 도메인으로 요청과 페이지를 나누는 방식등을 쓰기도 하는데,

어찌되었건 아직 문제가

​

도메인마다 커넥션을 맺고 끊음

상당한 시간과 대역폭을 소모

연결할 수 있는 커넥션 수의 제한

​

2.0 => 근본적인 해결을 위해 멀티플렉싱(latency 줄이기), 헤더압축(오버헤드 최소화), 서버푸시 기능 지원

​

멀티플렉싱

=> 프레임(2.0에서의 통신최소단위, 최소 하나의 프레임헤더, 바이너리로 인코딩)

프레임들로 메시지 구성

메시지는 요청 응답의 단위

=> 여기까지는 1.1고 ㅏ크게 다른건 없지만

​

스트림(양방향 통신을 통해 전달되는 한개 이상의 메시지)이라는 개념이 생겨서

(유튜브 그림들 찾아서 다 첨부하자)

​

헤더압축은 hpack방식

​

서버푸시는

기존에 방식이 html 요청, tag파싱, 리소스 재요청(css, js, png등), 완성 이런단계였는데,

그림첨부

한방에 요청으로 가능해짐

​

이렇게함에도 2.0은 tcp의 한계가 아직 있어서

​

3.0에서는 udp채용

​

https://www.youtube.com/watch?v=xcrjamphIp4&list=WL&index=5


## 근데 http/2를 쓰려면 어떻게 해야하는데?